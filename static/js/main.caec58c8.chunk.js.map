{"version":3,"sources":["templates/langchain/application/application.py","templates/langchain/custom_chain_field/custom_chain_field.py","templates/langchain/custom_chat_message_field/custom_chat_message_field.py","templates/langchain/custom_chat_model_field/custom_chat_model_field.py","templates/langchain/custom_chat_prompt_field/custom_chat_prompt_field.py","templates/langchain/custom_embedding_field/custom_embedding_field.py","templates/langchain/custom_llm_field/custom_llm_field.py","templates/langchain/custom_loader_field/custom_loader_field.py","templates/langchain/custom_memory_field/custom_memory_field.py","templates/langchain/custom_prompt_field/custom_prompt_field.py","templates/langchain/custom_retriever_field/custom_retriever_field.py","templates/langchain/custom_splitter_field/custom_splitter_field.py","templates/langchain/custom_tool_field/custom_tool_field.py","templates/langchain/custom_util_field/custom_util_field.py","templates/langchain/custom_vectorstore_field/custom_vectorstore_field.py","images sync nonrecursive /.*","images/LearningRateJustRight.svg","images/LearningRateTooLarge.svg","images/LearningRateTooSmall.svg","templates sync /.*.py","templates/langchain/application sync /.*.py","templates sync /^/.//.*$","components/icon.jsx","components/topmenu.jsx","utils.ts","components/leftmenu.jsx","components/layout.jsx","components/toast-message.jsx","Blockly/BlocklyComponent.jsx","Blockly/index.ts","fields/BaseField.jsx","components/modal.jsx","forms/fields/number-field.jsx","forms/fields/select-field.jsx","forms/fields/input-field.jsx","forms/fields/boolean-field.jsx","components/source-replacer.jsx","components/image-carousel.jsx","components/help-card.jsx","forms/chain-form.jsx","fields/ChainField.jsx","forms/chatmessage-form.jsx","fields/ChatMessageField.jsx","forms/chatmodel-form.jsx","fields/ChatModelField.jsx","forms/chatprompt-form.jsx","fields/ChatPromptField.jsx","forms/embedding-form.jsx","fields/EmbeddingField.jsx","forms/llm-form.jsx","fields/LlmField.jsx","forms/loader-form.jsx","fields/LoaderField.jsx","forms/memory-form.jsx","fields/MemoryField.jsx","forms/retriever-form.jsx","fields/RetrieverField.jsx","forms/splitter-form.jsx","fields/SplitterField.jsx","forms/tool-form.jsx","fields/ToolField.jsx","forms/util-form.jsx","fields/UtilField.jsx","forms/vectorstore-form.jsx","fields/VectorStoreField.jsx","forms/fields/textarea-field.jsx","forms/prompt-form.jsx","fields/PromptField.jsx","blocks/customblocks.ts","generator/generator.ts","blocks/ml-blocks.ts","generator/ml-blocks-generator.ts","generator/handlebars-helpers.ts","generator/ml-blocks-generator-python.ts","types.ts","context.ts","App.tsx","serviceWorker.ts","config.ts","local-store-context.ts","remote-store-context.ts","index.tsx"],"names":["module","exports","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","Icon","props","icon","size","className","color","defaultProps","TopMenu","onItemSelected","isBusy","topMenu","menu","useState","bg","variant","Brand","href","Spinner","animation","faRobot","style","Toggle","Collapse","Nav","m","i","options","length","DropdownButton","key","as","ButtonGroup","title","label","j","Item","eventKey","onClick","Link","link","srcImages","ctx","names","files","require","srcTemplates","srcAppTemplates","newApp","uuidv4","name","moment","format","content","json","hydrate","value","btoa","JSON","stringify","dehydrate","parse","atob","replace","labelize","toUpperCase","substring","$1","parseObject","isArray","debugInfo","obj","console","log","trim","split","filter","s","forEach","jsonObj","push","assign","evalSource","block","root","properties","statements","appendSufix","isPython","undefined","template","isRemote","Handlebars","source","rootObj","Array","p","isVariable","Blockly","variableDB_","getName","getFieldValue","fieldName","NAME_TYPE","transform","propertyName","statements_block_statements","statementToCode","blockStatements","bs","augmentedSrc","window","api","output","type","order","isPending","getComponentByName","then","component","find","assignment","compileComponent","results","raiseOnDone","buildSource","replacements","annotations","nodeTypes","nodeName","nodes","DOMParser","parseFromString","body","childNodes","foundAnnotations","node","innerText","nt","outerHTML","description","xmlFields","xml","fields","doc","fieldList","querySelectorAll","field","attributes","nodeValue","textContent","f","includes","platformTemplates","platforms","loadContent","tpls","ord","fileName","nameParts","platform","parentBlock","tpl","t","platformItem","newIdx","templates","newTemplate","fetch","res","text","groupTemplatesByParent","concatTemplates","selectorTypes","selector","selectorRef","blockTemplates","blockItem","blockName","selectorType","st","tf","LeftMenu","onItemRemoved","onItemClonned","items","mi","isActive","setIsActive","ListGroup","action","disabled","marginLeft","backgroundColor","array","flavor","active","localStorage","getItem","onSelect","index","resetState","handleActiveState","padding","Row","marginRight","Col","lg","faFileCode","toLowerCase","Button","border","width","height","float","faTrashAlt","faClone","Layout","children","leftMenu","paddingLeft","paddingRight","textAlign","marginTop","display","Date","getFullYear","ToastMessage","message","onClose","show","setShow","Toast","position","bottom","right","zIndex","delay","autohide","Header","Body","setLocale","locale","BlocklyComponent","this","initialXml","rest","primaryWorkspace","inject","blocklyDiv","toolbox","Xml","domToWorkspace","textToDom","Fragment","ref","xmlns","is","React","Component","Block","createElement","BaseField","getPlatform","sourceBlock_","workspace","topBlocks_","inputList","fieldRow","fr","value_","getAppTypeAndFlavor","div_","getContentDiv","ReactDOM","render","showPositionedByField","dropdownDispose_","bind","unmountComponentAtNode","FieldRenderComponent","register","ModalDialog","onCancel","Modal","onHide","scrollable","closeButton","NumberField","prop","data","isNameValue","onValueChange","Form","Group","Label","Control","min","max","step","defaultValue","onChange","target","required","SelectField","isDatasetField","isValid","setIsValid","hideIfSingleOption","sort","a","b","k","optionName","optionTitle","option","RegExp","test","InputField","BooleanField","Check","checked","SourceReplacer","maxWords","join","r","url","elements","replPositions","el","start","indexOf","end","pos","stopPropagation","open","focus","windowOpen","bold","strong","italic","ImageCarousel","Carousel","images","image","item","srcImg","src","alt","Caption","left","paddingTop","paddingBottom","opacity","HelpCard","Card","marginBottom","itemProperties","settings","sett","arrProps","ip","refProperty","arrProp","ap","ChainForm","onSave","onShowHelp","validated","setValidated","setData","visibleHelp","setVisibleHelp","handleSettings","tmpSetts","splice","fontSize","faChevronCircleLeft","faInfoCircle","noValidate","onSubmit","event","currentTarget","checkValidity","preventDefault","select","changedData","updatedValue","dp","default","updateSettings","number","input","checkbox","isChecked","ModalForm","setSize","visible","ChainField","SERIALIZABLE","values","setValue","hideIfOwner","fieldElement","bt","ChatMessageForm","ChatMessageField","ChatModelForm","ChatModelField","ChatPromptForm","ChatPromptField","EmbeddingForm","EmbeddingField","LlmForm","LlmField","LoaderForm","LoaderField","MemoryForm","MemoryField","RetrieverForm","RetrieverField","SplitterForm","SplitterField","ToolForm","ToolField","UtilForm","UtilField","VectorStoreForm","VectorStoreField","TextAreaField","rows","PromptForm","textarea","PromptField","customChatPromptFieldDef","customLlmFieldDef","customChainFieldDef","customToolFieldDef","customUtilFieldDef","customChatModelFieldDef","customChatMessageFieldDef","customLoaderFieldDef","customVectorstoreFieldDef","customSplitterFieldDef","customEmbeddingFieldDef","customMemoryFieldDef","customRetrieverFieldDef","customPromptFieldDef","def","customBaseField","init","jsonInit","setStyle","customChatPromptField","setColour","customLlmField","customChainField","customToolField","customUtilField","customChatModelField","customChatMessageField","customLoaderField","customVectorstoreField","customSplitterField","customEmbeddingField","customMemoryField","customRetrieverField","customPromptField","Set","n","appendDummyInput","appendField","tplName","appendStatementInput","setCheck","setTooltip","setHelpUrl","setPreviousStatement","setNextStatement","eq","v1","v2","ne","lt","gt","lte","gte","and","prototype","every","call","arguments","Boolean","or","slice","some","parseInt","boolVal","getPlatformTemplate","db","blockDB_","eRunMode","DataContext","createContext","whoAmI","store","getApplications","setApplications","apps","getSelectedApplicationId","setSelectedApplicationId","getTopMenu","getLeftMenu","setLeftMenu","buildLangChain","App","simpleWorkspace","useContext","buildToastAction","isVisible","defaultToastAction","applications","selectedApplicationId","app","application","setApplication","setInitialXml","setIsBusy","toastAction","setToastAction","saveState","selAppId","clearBusy","loadApplication","document","location","reload","addApplication","existingApp","setTimeout","onOutputDone","outputList","arrayItems","arrayItemName","chainItem","propName","prompts","innerItem","innerPropName","innerProp","out","lines","mimeType","extension","downloader","saveApplication","saveAsNotebook","BlocklyPython","workspaceToCode","workspaceToDom","domToText","tmpApps","downloadApplications","origName","blob","Blob","URL","createObjectURL","uri","download","click","downloadUri","revokeObjectURL","onload","ev","raisedEvent","Events","Ui","toJson","matches","newValue","isSingleApp","selApp","tmpApp","addChangeListener","theme","BlocklyCore","Dark","readOnly","trashcan","media","move","scrollbars","drag","wheel","zoom","controls","startScale","maxScale","minScale","scaleSpeed","grid","spacing","snap","hostname","match","config","runMode","Local","apiUrl","sampleApplications","_getApplications","setItem","getDefaultApp","_leftMenu","faFolderOpen","_requestOptions","method","mode","headers","localDataContext","faPlusSquare","faLightbulb","faFileImage","faArrowAltCircleDown","faSave","reqOptions","remoteDataContext","LocalDataContext","dataContext","RemoteDataContext","Provider","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.caec58c8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/application.03f03941.py\";","module.exports = __webpack_public_path__ + \"static/media/custom_chain_field.6600543e.py\";","module.exports = __webpack_public_path__ + \"static/media/custom_chat_message_field.6600543e.py\";","module.exports = __webpack_public_path__ + \"static/media/custom_chat_model_field.6600543e.py\";","module.exports = __webpack_public_path__ + \"static/media/custom_chat_prompt_field.6600543e.py\";","module.exports = __webpack_public_path__ + \"static/media/custom_embedding_field.6600543e.py\";","module.exports = __webpack_public_path__ + \"static/media/custom_llm_field.6600543e.py\";","module.exports = __webpack_public_path__ + \"static/media/custom_loader_field.6600543e.py\";","module.exports = __webpack_public_path__ + \"static/media/custom_memory_field.6600543e.py\";","module.exports = __webpack_public_path__ + \"static/media/custom_prompt_field.6600543e.py\";","module.exports = __webpack_public_path__ + \"static/media/custom_retriever_field.6600543e.py\";","module.exports = __webpack_public_path__ + \"static/media/custom_splitter_field.6600543e.py\";","module.exports = __webpack_public_path__ + \"static/media/custom_tool_field.6600543e.py\";","module.exports = __webpack_public_path__ + \"static/media/custom_util_field.6600543e.py\";","module.exports = __webpack_public_path__ + \"static/media/custom_vectorstore_field.6600543e.py\";","var map = {\n\t\"./LearningRateJustRight.svg\": 152,\n\t\"./LearningRateTooLarge.svg\": 153,\n\t\"./LearningRateTooSmall.svg\": 154\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 151;","module.exports = __webpack_public_path__ + \"static/media/LearningRateJustRight.6eea6d8a.svg\";","module.exports = __webpack_public_path__ + \"static/media/LearningRateTooLarge.a1b26c89.svg\";","module.exports = __webpack_public_path__ + \"static/media/LearningRateTooSmall.0d1a77a6.svg\";","var map = {\n\t\"./langchain/application/application.py\": 81,\n\t\"./langchain/custom_chain_field/custom_chain_field.py\": 93,\n\t\"./langchain/custom_chat_message_field/custom_chat_message_field.py\": 94,\n\t\"./langchain/custom_chat_model_field/custom_chat_model_field.py\": 95,\n\t\"./langchain/custom_chat_prompt_field/custom_chat_prompt_field.py\": 96,\n\t\"./langchain/custom_embedding_field/custom_embedding_field.py\": 97,\n\t\"./langchain/custom_llm_field/custom_llm_field.py\": 98,\n\t\"./langchain/custom_loader_field/custom_loader_field.py\": 99,\n\t\"./langchain/custom_memory_field/custom_memory_field.py\": 100,\n\t\"./langchain/custom_prompt_field/custom_prompt_field.py\": 101,\n\t\"./langchain/custom_retriever_field/custom_retriever_field.py\": 102,\n\t\"./langchain/custom_splitter_field/custom_splitter_field.py\": 103,\n\t\"./langchain/custom_tool_field/custom_tool_field.py\": 104,\n\t\"./langchain/custom_util_field/custom_util_field.py\": 105,\n\t\"./langchain/custom_vectorstore_field/custom_vectorstore_field.py\": 106\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 155;","var map = {\n\t\"./application.py\": 81\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 156;","var map = {\n\t\"./langchain/application/application.py\": 81,\n\t\"./langchain/custom_chain_field/custom_chain_field.py\": 93,\n\t\"./langchain/custom_chat_message_field/custom_chat_message_field.py\": 94,\n\t\"./langchain/custom_chat_model_field/custom_chat_model_field.py\": 95,\n\t\"./langchain/custom_chat_prompt_field/custom_chat_prompt_field.py\": 96,\n\t\"./langchain/custom_embedding_field/custom_embedding_field.py\": 97,\n\t\"./langchain/custom_llm_field/custom_llm_field.py\": 98,\n\t\"./langchain/custom_loader_field/custom_loader_field.py\": 99,\n\t\"./langchain/custom_memory_field/custom_memory_field.py\": 100,\n\t\"./langchain/custom_prompt_field/custom_prompt_field.py\": 101,\n\t\"./langchain/custom_retriever_field/custom_retriever_field.py\": 102,\n\t\"./langchain/custom_splitter_field/custom_splitter_field.py\": 103,\n\t\"./langchain/custom_tool_field/custom_tool_field.py\": 104,\n\t\"./langchain/custom_util_field/custom_util_field.py\": 105,\n\t\"./langchain/custom_vectorstore_field/custom_vectorstore_field.py\": 106\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 157;","import React from \"react\";\nimport PropTypes from 'prop-types';\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nconst Icon = (props) => {\n    const { icon, size, className, color } = props;\n\n    return (\n        <FontAwesomeIcon\n            icon={icon} \n            size={size} \n            className={className}\n            color={color} />\n    );\n}\nIcon.propTypes = {\n    icon: PropTypes.object.isRequired,\n    size: PropTypes.string,\n    className: PropTypes.string,\n    color: PropTypes.string,\n}\nIcon.defaultProps = {\n    size: \"lg\",\n    className: \"mr-2\",\n    color: \"#666\",\n}\n\nexport default Icon;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport NavBar from \"react-bootstrap/Navbar\";\nimport Nav from \"react-bootstrap/Nav\";\nimport Spinner from \"react-bootstrap/Spinner\";\nimport ButtonGroup from \"react-bootstrap/ButtonGroup\";\nimport DropDown from \"react-bootstrap/Dropdown\";\nimport DropdownButton from \"react-bootstrap/DropdownButton\";\n\nimport { faRobot } from \"@fortawesome/free-solid-svg-icons\";\n\nimport Icon from './icon';\n\nconst TopMenu = ({ onItemSelected, isBusy, menu: topMenu }) => {\n    const [menu,] = useState(topMenu);\n\n    return (\n        <NavBar bg=\"dark\" variant=\"dark\">\n            <NavBar.Brand href=\"#home\">\n                {isBusy ? <Spinner animation=\"grow\" /> : <Icon icon={faRobot} size=\"lg\" />}\n                <span style={{color: `#ccc`}}>LangChain Applications</span>\n            </NavBar.Brand>\n            <NavBar.Toggle />\n            <NavBar.Collapse className=\"justify-content-end\">\n                <Nav className=\"ml-auto\">\n                    {menu.map((m, i) => {\n                        if (!!m.options && m.options.length) {\n                            return (\n                                <DropdownButton key={`topMenu${i}`} as={ButtonGroup} title={m.label} size=\"sm\" variant=\"dark\">\n                                    {m.options.map((o, j) => (\n                                        <DropDown.Item key={`topInnerMenu${j}`} variant=\"dark\" eventKey={j} onClick={\n                                            e => onItemSelected(o, j)\n                                        }>\n                                            <Icon icon={o.icon} size=\"sm\" color=\"primary\" /> <small>{o.label}</small>\n                                        </DropDown.Item>\n                                    ))}\n\n                                </DropdownButton>\n                            )\n                        }\n                        else return (\n                            <Nav.Link key={`topMenu${i}`} variant=\"dark\" href={m.link} onClick={\n                                e => onItemSelected(m, i)\n                            }>\n                                <Icon icon={m.icon} size=\"sm\" color=\"primary\" /><small>{m.label}</small>\n                            </Nav.Link>\n                        )\n                    })}\n                </Nav>\n            </NavBar.Collapse>\n        </NavBar>\n    )\n}\nTopMenu.propTypes = {\n    onItemSelected: PropTypes.func.isRequired,\n    menu: PropTypes.array.isRequired,\n    isBusy: PropTypes.bool.isRequired,\n}\nTopMenu.defaultProps = {\n    isBusy: false,\n}\n\nexport default TopMenu;\n","/// <reference path=\"../node_modules/blockly/blockly.d.ts\"/>\n/// <reference path=\"../node_modules/blockly/python.js\"/>\n/// <reference path=\"../node_modules/blockly/core.js\"/>\n\nimport moment from 'moment';\nimport { v4 as uuidv4 } from 'uuid';\nimport * as Handlebars from 'handlebars';\n\nimport * as Blockly from 'blockly/core';\nimport 'blockly/python';\nimport 'blockly/javascript';\nimport { IBlockProperty, IStatement, IAppProp } from './types';\n\nconst APPLICATIONS_KEY = 'lc_blockly_applications';\nconst SELECTED_APPLICATION_ID_KEY = 'lc_blockly_selectedApplicationId';\n\nconst FIELDS_SEPARATOR = ';'\nconst LIST_SEPARATOR = ','\nconst PROPERTY_SEPARATOR = '='\n\nconst DEFAULT_CONTENT = `<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n    <block type=\"application\" deletable=\"false\" x=\"0\" y=\"0\"></block>\n  </xml>`;\n\nconst srcImages = (ctx => {\n    const keys = ctx.keys();\n    return { names: keys, files: keys.map(ctx) };\n})(require.context('./images', false, /.*/));\n\nconst srcTemplates = (ctx => {\n    const keys = ctx.keys();\n    return { names: keys, files: keys.map(ctx) };\n})(require.context('./templates', true, /.*.py/));\n\nconst srcAppTemplates = (ctx => {\n    const keys = ctx.keys();\n    return keys;\n})(require.context('./templates/langchain/application', true, /.*.py/));\n\nconst newApp = () => {\n    return {\n        id: uuidv4(),\n        name: `Application-` + moment().format('MM-DD-YY:HH:mm:ss'),\n        content: DEFAULT_CONTENT,\n        json: {}\n    };\n}\n\nconst hydrate = (value: any) => btoa(JSON.stringify(value));\nconst dehydrate = (value: string) => JSON.parse(atob(value).replace(/\\\\\"/g, `'`).replace(/\\\\/g, ``));\n\nconst labelize = (value: string) => value\n    ? `${value[0].toUpperCase()}${value.substring(1).replace(/[A-Z]/g, (m, $1) => ' ' + m).replace(/[_]/g, (m, $1) => ' ')}`\n    : null;\n\nconst parseObject = (value: any, isArray = false, debugInfo = false) => {\n    const obj = isArray ? [] : {};\n    if (!value) return obj;\n    if (debugInfo) console.log('@parse', value, typeof value);\n    value\n        .trim()\n        .split('|')\n        .filter((s: string) => s.trim().length)\n        .forEach((s: string) => {\n            if (debugInfo) console.log('@each', s);\n            const jsonObj = JSON.parse(s);\n            if (debugInfo) console.log('@each json', jsonObj);\n            if (isArray) (obj as any).push(jsonObj)\n            else Object.assign(obj, jsonObj);\n            if (debugInfo) console.log('@obj', obj);\n        })\n    return obj;\n}\n\nconst evalSource = (block: any, root: any, properties: IBlockProperty[], statements: IStatement[] = null, isArray = false, appendSufix = true) => {\n    const isPython = block.template !== undefined;\n    const template = isPython && !block.template.isRemote\n        ? Handlebars.compile(block.template.content)\n        : null;\n    const source: any = {};\n    let rootObj = source;\n    if (root) {\n        rootObj = source[root] = isArray ? [] : {};\n    }\n\n    if (properties && Array.isArray(properties)) {\n        properties.forEach(p => {\n            const value = !!p.isVariable && p.isVariable\n                ? isPython\n                    ? Blockly.Python.variableDB_.getName(block.getFieldValue(p.fieldName), Blockly.Variables.NAME_TYPE)\n                    : Blockly.JavaScript.variableDB_.getName(block.getFieldValue(p.fieldName), Blockly.Variables.NAME_TYPE)\n                : !!p.transform\n                    ? p.transform(block.getFieldValue(p.fieldName))\n                    : block.getFieldValue(p.fieldName);\n            rootObj[p.propertyName] = value;\n        });\n    }\n\n    if (statements && Array.isArray(statements)) {\n        statements.forEach(s => {\n            const statements_block_statements = isPython\n                ? Blockly.Python.statementToCode(block, s.fieldName)\n                : Blockly.JavaScript.statementToCode(block, s.fieldName);\n            const blockStatements = parseObject(statements_block_statements, s.isArray) as any;\n            if (s.isArray) blockStatements.forEach((bs: any) => rootObj.push(bs));\n            else Object.assign(rootObj, blockStatements);\n        });\n    }\n\n    if (isPython) {\n        const augmentedSrc = !!window['appProps'] ? { ...window['appProps'], ...source } : source;\n        if (block.template.isRemote) {\n            const api = window['api'];\n\n            const output = {\n                type: block.type,\n                order: block.template.order,\n                content: null,\n                source,\n                isPending: true,\n            };\n            window['output'].push(output);\n\n            api.getComponentByName(block.template.name)\n                .then(component => {\n                    if (!!component) {\n                        if (properties && Array.isArray(properties)) {\n                            const prop = properties.find(p => !!p.assignment);\n                            prop.assignment(component, augmentedSrc);\n                        }\n                        api.compileComponent(component)\n                            .then(json => {\n                                output.content = json.results;\n                                output.isPending = false;\n                                window['onOutputDone'](window['output']);\n                            });\n                    }\n                });\n        }\n        else {\n            window['output'].push({\n                type: block.type,\n                order: block.template.order,\n                content: template(augmentedSrc),\n                source,\n                isPending: false\n            });\n            if (!!block.raiseOnDone) window['onOutputDone'](window['output']);\n        }\n    }\n\n    var code = JSON.stringify(source);\n    return code + (appendSufix ? '|' : '');\n}\n\nconst buildSource = (value: string, replacements = [], annotations = []) => {\n    const nodeTypes = [\n        { nodeName: \"B\", type: \"bold\" },\n        { nodeName: \"I\", type: \"italic\" },\n        { nodeName: \"S\", type: \"strong\" },\n        { nodeName: \"A\", type: \"a\" },\n    ];\n    const nodes = new DOMParser().parseFromString(value, \"text/html\").body.childNodes;\n    const foundAnnotations = [];\n    for (let i = 0; i < nodes.length; i++) {\n        const node = nodes[i] as any;\n        if (node.nodeName !== \"#text\") {\n            foundAnnotations.push(({\n                label: node.innerText,\n                type: nodeTypes.find(nt => nt.nodeName === node.nodeName).type\n            }));\n            value = value.replace(node.outerHTML, node.innerText);\n        }\n    }\n    return {\n        description: value,\n        replacements,\n        annotations: annotations.length\n            ? annotations\n            : foundAnnotations\n    }\n}\n\nconst xmlFields = (xml: string, fields: string[]): IAppProp[] => {\n    const doc: Document = new DOMParser().parseFromString(xml, \"text/html\");\n    const fieldList = [...doc.querySelectorAll(\"field\") as any]\n        .map(field => ({\n            name: field.attributes[0].nodeValue,\n            value: field.textContent,\n        }))\n        .filter(f => fields.includes(f.name));\n    return fieldList.length\n        ? fieldList\n        : [\n            {\n                name: 'TRAIN',\n                value: 'PLATFORM'\n            },\n            {\n                name: 'FLAVOR',\n                value: 'LANGCHAIN'\n            }\n        ];\n}\n\nconst platformTemplates = (platforms = [], loadContent = false) => {\n    const tpls = [\n        { name: \"application\", order: 0 },\n        { name: \"custom_dataset_field\", order: 225 },\n        { name: \"plot_splitted_data\", order: 300 },\n        { name: \"transformations\", order: 200 },\n        { name: \"custom_transformation_field\", order: 225 },\n        { name: \"dataset_training\", order: 500 },\n        { name: \"callbacks\", order: 525 },\n        { name: \"custom_callback_field\", order: 550 },\n        { name: \"custom_training_field\", order: 575 },\n        { name: \"image_classification_transfer_learning\", order: 600 },\n        { name: \"plot_evaluated_data\", order: 700 },\n        { name: \"plot_confusion_matrix\", order: 800 },\n        { name: \"export\", order: 900 },\n        { name: 'custom_chain_field', order: 1100 },\n        { name: 'custom_llm_field', order: 1125 },\n        { name: 'custom_tool_field', order: 1150 },\n        { name: 'custom_util_field', order: 1175 },\n        { name: 'custom_chat_prompt_field', order: 1200 },\n        { name: 'custom_chat_model_field', order: 1225 },\n        { name: 'custom_chat_message_field', order: 1250 },\n        { name: 'custom_loader_field', order: 1275 },\n        { name: 'custom_vectorstore_field', order: 1300 },\n        { name: 'custom_splitter_field', order: 1325 },\n        { name: 'custom_embedding_field', order: 1350 },\n        { name: 'custom_memory_field', order: 1375 },\n        { name: 'custom_retriever_field', order: 1400 },\n        { name: 'custom_prompt_field', order: 1425 },\n    ];\n\n    srcTemplates.names.forEach((f, ord) => {\n        const fileName = require(`./templates/${f.substring(2)}`);\n        if (typeof fileName !== 'string') return;\n\n        const nameParts = f.split('/');\n        const platform = nameParts[1];\n        const parentBlock = nameParts[2];\n        const name = nameParts[nameParts.length - 1].split('.')[0];\n        const tpl = tpls.find(t => t.name === name);\n        const order = tpl\n            ? tpl.order\n            : tpls.find(t => t.name === parentBlock).order + ord;\n\n        let platformItem = platforms.find(p => p.name === platform);\n        if (!platformItem) {\n            const newIdx = platforms.push({ name: platform, templates: [] });\n            platformItem = platforms[newIdx - 1];\n        }\n\n        const newTemplate = {\n            name,\n            parentBlock,\n            platform,\n            order,\n            isRemote: false,\n        };\n\n        if (loadContent) {\n            fetch(fileName)\n                .then(res => res.text())\n                .then(content => platformItem.templates.push({ ...newTemplate, content }));\n        } else {\n            platformItem.templates.push(newTemplate);\n        }\n    });\n\n    return platforms;\n}\n\nconst groupTemplatesByParent = (platforms, concatTemplates = null) => {\n    const selectorTypes = [\n        { name: \"application\" },\n        { name: \"custom_dataset_field\", selector: \".*\", selectorRef: \"name\" },\n        { name: \"plot_splitted_data\" },\n        { name: \"transformations\" },\n        { name: \"custom_transformation_field\", selector: \".*\", selectorRef: \"type\" },\n        { name: \"dataset_training\" },\n        { name: \"callbacks\" },\n        { name: \"custom_callback_field\", selector: \".*\", selectorRef: \"type\" },\n        { name: \"custom_training_field\", selector: \"true\", selectorRef: \"transferLearning\" },\n        { name: \"plot_evaluated_data\" },\n        { name: \"plot_confusion_matrix\" },\n        { name: \"export\" },\n        { name: 'custom_chain_field', selector: \".*\", selectorRef: \"type\" },\n        { name: 'custom_llm_field', selector: \".*\", selectorRef: \"type\" },\n        { name: 'custom_tool_field', selector: \".*\", selectorRef: \"type\" },\n        { name: 'custom_util_field', selector: \".*\", selectorRef: \"type\" },\n        { name: 'custom_chat_prompt_field', selector: \".*\", selectorRef: \"type\" },\n        { name: 'custom_chat_model_field', selector: \".*\", selectorRef: \"type\" },\n        { name: 'custom_chat_message_field', selector: \".*\", selectorRef: \"type\" },\n        { name: 'custom_loader_field', selector: \".*\", selectorRef: \"type\" },\n        { name: 'custom_vectorstore_field', selector: \".*\", selectorRef: \"type\" },\n        { name: 'custom_splitter_field', selector: \".*\", selectorRef: \"type\" },\n        { name: 'custom_embedding_field', selector: \".*\", selectorRef: \"type\" },\n        { name: 'custom_memory_field', selector: \".*\", selectorRef: \"type\" },\n        { name: 'custom_retriever_field', selector: \".*\", selectorRef: \"type\" },\n        { name: 'custom_prompt_field', selector: \".*\", selectorRef: \"type\" },\n    ];\n    const blockTemplates = [];\n    platforms.forEach(p => {\n        p.templates.forEach(t => {\n            let blockItem = blockTemplates.find(p => p.blockName === t.parentBlock);\n            if (!blockItem) {\n                const newIdx = blockTemplates.push({ blockName: t.parentBlock, templates: [] });\n                blockItem = blockTemplates[newIdx - 1];\n            }\n            const selectorType = selectorTypes.find(st => st.name === t.parentBlock);\n            if (!blockItem.templates.find(tf => tf.name === t.name && tf.platform === t.platform)) {\n                blockItem.templates.push({\n                    name: t.name,\n                    selector: selectorType.selector,\n                    selectorRef: selectorType.selectorRef,\n                    platform: t.platform,\n                    isRemote: false,\n                });\n            }\n        });\n    });\n\n    return !!concatTemplates\n        ? [...blockTemplates, ...concatTemplates]\n        : blockTemplates;\n}\n\n\nexport {\n    APPLICATIONS_KEY,\n    SELECTED_APPLICATION_ID_KEY,\n    FIELDS_SEPARATOR,\n    LIST_SEPARATOR,\n    PROPERTY_SEPARATOR,\n    DEFAULT_CONTENT,\n    newApp,\n    hydrate,\n    dehydrate,\n    labelize,\n    parseObject,\n    xmlFields,\n    evalSource,\n    srcImages,\n    srcTemplates,\n    srcAppTemplates,\n    buildSource,\n    platformTemplates,\n    groupTemplatesByParent,\n}\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport ListGroup from \"react-bootstrap/ListGroup\";\nimport Button from \"react-bootstrap/Button\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport { faFileCode, faTrashAlt, faClone } from \"@fortawesome/free-regular-svg-icons\";\nimport Icon from './icon';\nimport { xmlFields } from './../utils';\n\nconst LeftMenu = (props) => {\n    const { onItemSelected, onItemRemoved, onItemClonned } = props;\n    const [menu,] = useState(props.menu);\n    const [isActive, setIsActive] = useState(menu[0].items.map(mi => false));\n\n    const handleActiveState = (index) => {\n        const resetState = menu[0].items.map(mi => false);\n        resetState[index] = !isActive[index];\n        setIsActive(resetState);\n    }\n\n    return (\n        <>\n            {menu.map((m, i) =>\n                <ListGroup key={`leftMenu${i}`}>\n                    <ListGroup.Item action href={`#${m.label}`} disabled style={{ marginLeft: `-8px`, backgroundColor: `#1e1e1e` }}>\n                        <small>\n                            <strong style={{ color: `#98caff`}}>\n                                <Icon icon={m.icon} size=\"sm\" /> {m.label}\n                            </strong>\n                        </small>\n                    </ListGroup.Item>\n                    {m.items && Array.isArray(m.items) && m.items.map((mi, j, array) => {\n                        const fields = xmlFields(mi.content, [\"TRAIN\", \"FLAVOR\"]);\n                        const type = fields.find(f => f.name === 'TRAIN').value;\n                        const flavor = fields.find(f => f.name === 'FLAVOR').value;\n                        \n                        return (<ListGroup.Item key={`leftMenuItem${j}`} active={mi.id === localStorage.getItem(\"selectedApplicationId\")}\n                            action\n                            href={`#${mi.name}`}\n                            className={isActive[j] ? \"list-group-item.active\" : \"\"}\n                            onSelect={() => {\n                                handleActiveState(j);\n                                onItemSelected(mi, j);\n                            }}\n                            style={{ padding: 0 }}\n                        >\n                            <Row style={{ marginLeft: 0, marginRight: 0, backgroundColor: '#1e1e1e' }}>\n                                <Col lg={1}>\n                                    <Icon icon={faFileCode} size=\"sm\" />\n                                </Col>\n                                <Col>\n                                    <small style={{ color: `#63aeff` }}>{mi.name}</small>\n                                    <br />\n                                    <small style={{ color: `#ccc` }}>{type.toLowerCase()}: <i>{flavor.toLowerCase()}</i></small>\n                                </Col>\n                                <Col lg={5}>\n                                    <Button as=\"div\" size=\"sm\"\n                                        onClick={e => onItemRemoved(mi, j)}\n                                        style={{\n                                            backgroundColor: `Transparent`,\n                                            color: `#343a40`,\n                                            border: `0 solid white`,\n                                            width: `auto`,\n                                            height: `auto`,\n                                            float: `right`,\n                                        }}>\n                                        <Icon icon={faTrashAlt} size=\"sm\" />\n                                    </Button>\n                                    <Button as=\"div\" size=\"sm\"\n                                        onClick={e => onItemClonned(mi, j)}\n                                        style={{\n                                            backgroundColor: `Transparent`,\n                                            color: `#343a40`,\n                                            border: `0 solid white`,\n                                            width: `auto`,\n                                            height: `auto`,\n                                            float: `right`,\n                                        }}>\n                                        <Icon icon={faClone} size=\"sm\" />\n                                    </Button>\n                                </Col>\n                            </Row>\n                        </ListGroup.Item>)\n                    })}\n                </ListGroup>\n            )}\n        </>\n    )\n}\nLeftMenu.propTypes = {\n    onItemSelected: PropTypes.func.isRequired,\n    onItemRemoved: PropTypes.func.isRequired,\n    onItemClonned: PropTypes.func.isRequired,\n    menu: PropTypes.array.isRequired,\n}\n\nexport default LeftMenu;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\n\nimport TopMenu from './topmenu';\nimport LeftMenu from './leftmenu';\nimport \"./layout.css\";\n\nconst Layout = ({ children, onItemSelected, onItemRemoved, onItemClonned, topMenu, leftMenu, isBusy }) => {\n  return (\n    <>\n      <TopMenu onItemSelected={onItemSelected} menu={topMenu} isBusy={isBusy} />\n\n      <Row style={{ marginLeft: 0, marginRight: 0 }}>\n        <Col lg={3} style={{ paddingLeft: 0, paddingRight: 0 }}>\n          <LeftMenu onItemSelected={onItemSelected} onItemRemoved={onItemRemoved} onItemClonned={onItemClonned} menu={leftMenu} />\n        </Col>\n        <Col style={{ paddingLeft: 0, paddingRight: 0 }}>\n          <main>{children}</main>\n        </Col>\n      </Row>\n      <footer style={{\n        textAlign: `center`,\n        width: `100%`,\n        marginTop: `auto`,\n        display: `block`\n      }}>\n        <small style={{ color: `#ccc`}}> {new Date().getFullYear()}, Built by</small>\n        {` `}\n        <a href=\"https://migfig.github.io\">@migfig</a>\n      </footer>\n    </>\n  )\n}\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemRemoved: PropTypes.func.isRequired,\n  onItemClonned: PropTypes.func.isRequired,\n  topMenu: PropTypes.array.isRequired,\n  leftMenu: PropTypes.array.isRequired,\n  isBusy: PropTypes.bool.isRequired,\n}\n\nexport default Layout\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Toast from 'react-bootstrap/Toast';\nimport { faRobot } from \"@fortawesome/free-solid-svg-icons\";\nimport Icon from './icon';\n\nconst ToastMessage = ({ title, message, onClose }) => {\n    const [show, setShow] = useState(true);\n\n    return <Toast onClose={e => {\n            setShow(false);\n            onClose();\n        }} show={show}\n        style={{\n            position: `absolute`,\n            bottom: 0,\n            right: 0,\n            zIndex: 9000\n        }}\n        delay={3000} autohide>\n        <Toast.Header>\n            <Icon icon={faRobot} size=\"sm\" />\n            <strong className=\"mr-auto\">{title}</strong>\n        </Toast.Header>\n        <Toast.Body>\n            {message}\n        </Toast.Body>\n    </Toast>\n}\nToastMessage.propTypes = {\n    title: PropTypes.string.isRequired,\n    message: PropTypes.string.isRequired,\n    onClose: PropTypes.func.isRequired,\n}\n\nexport default ToastMessage;\n","/**\n * @license\n * \n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Blockly React Component.\n * @author samelh@google.com (Sam El-Husseini)\n */\n\nimport React from 'react';\nimport './BlocklyComponent.css';\n\nimport Blockly from 'blockly/core';\nimport locale from 'blockly/msg/en';\nimport 'blockly/blocks';\n\nBlockly.setLocale(locale);\n\nclass BlocklyComponent extends React.Component {\n\n    componentDidMount() {\n        const { initialXml, children, ...rest } = this.props;\n        this.primaryWorkspace = Blockly.inject(\n            this.blocklyDiv,\n            {\n                toolbox: this.toolbox,\n                ...rest\n            },\n        );\n\n        if (initialXml) {\n            Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(initialXml), this.primaryWorkspace);\n        }\n    }\n\n    get workspace() {\n        return this.primaryWorkspace;\n    }\n\n    setXml(xml) {\n        Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(xml), this.primaryWorkspace);\n    }\n\n    render() {\n        const { children } = this.props;\n\n        return <React.Fragment>\n            <div ref={e => this.blocklyDiv = e} id=\"blocklyDiv\" />\n            <xml xmlns=\"https://developers.google.com/blockly/xml\" is=\"blockly\" style={{ display: 'none' }} ref={(toolbox) => { this.toolbox = toolbox; }}>\n                {children}\n            </xml>\n        </React.Fragment>;\n    }\n}\n\nexport default BlocklyComponent;\n","/**\n * @license\n * \n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview XML wrappers for block, category, value, field and shadow.\n * @author samelh@google.com (Sam El-Husseini)\n */\n\n import React from 'react';\nimport BlocklyComponent from './BlocklyComponent';\n\nexport default BlocklyComponent;\n\nconst Block = (p) => {\n    const { children, ...props } = p;\n    props.is = \"blockly\";\n    return React.createElement(\"block\", props, children);\n};\n\nconst Category = (p) => {\n    const { children, ...props } = p;\n    props.is = \"blockly\";\n    return React.createElement(\"category\", props, children);\n};\n\nconst Value = (p) => {\n    const { children, ...props } = p;\n    props.is = \"blockly\";\n    return React.createElement(\"value\", props, children);\n};\n\nconst Field = (p) => {\n    const { children, ...props } = p;\n    props.is = \"blockly\";\n    return React.createElement(\"field\", props, children);\n};\n\nconst Shadow = (p) => {\n    const { children, ...props } = p;\n    props.is = \"blockly\";\n    return React.createElement(\"shadow\", props, children);\n};\n\nexport { Block, Category, Value, Field, Shadow }","/**\n * @license\n * \n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Sample React Blockly Field.\n * This shows you how to create a custom Blockly field that renders a React\n * component inside of the dropdown div when shown.\n * @author samelh@google.com (Sam El-Husseini)\n */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport * as Blockly from 'blockly/core';\n\nclass BaseField extends Blockly.Field {\n\n  static fromJson(options) {\n    return new BaseField(options['text']);\n  }\n\n  getPlatform = () =>\n    this.sourceBlock_\n      .workspace\n      .topBlocks_[0]\n      .inputList[0]\n      .fieldRow.find(fr => fr.name === \"PLATFORM\")\n      .value_\n      .toLowerCase();\n\n  getAppTypeAndFlavor = () => {\n    const type = window['TRAIN'];\n    const flavor = window['FLAVOR'];\n    return { type, flavor }\n  }\n\n  showEditor_() {\n    this.div_ = Blockly.DropDownDiv.getContentDiv();\n    ReactDOM.render(this.render(),\n      this.div_);\n\n    Blockly.DropDownDiv.showPositionedByField(\n      this, this.dropdownDispose_.bind(this));\n  }\n\n  dropdownDispose_() {\n    ReactDOM.unmountComponentAtNode(this.div_);\n  }\n\n  render() {\n    return <FieldRenderComponent />\n  }\n}\n\nclass FieldRenderComponent extends React.Component {\n\n  render() {\n    return <div style={{ color: '#fff' }}>\n      Hello from React!\n        </div>;\n  }\n}\n\nBlockly.fieldRegistry.register('base_field', BaseField);\n\nexport default BaseField;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from \"react-bootstrap/Modal\";\n\nconst ModalDialog = (props) => {\n    const { title, size, children, onCancel } = props;\n    const [show, setShow] = useState(true);\n\n    const handleClose = () => {\n        setShow(false);\n        onCancel();\n    }\n\n    return (\n        <Modal show={show} onHide={handleClose} size={size} scrollable={true}>\n            <Modal.Header style={{ backgroundColor: \"var(--dark)\", color: \"var(--light)\" }} closeButton>{title}</Modal.Header>\n            <Modal.Body style={{ padding: `0rem` }}>\n                {children}\n            </Modal.Body>\n        </Modal>\n    )\n}\nModalDialog.propTypes = {\n    title: PropTypes.string.isRequired,\n    size: PropTypes.string.isRequired,\n    children: PropTypes.node.isRequired,\n    onCancel: PropTypes.func.isRequired,\n}\n\nexport default ModalDialog;\n","import React from 'react'\nimport PropTypes from 'prop-types';\n\nimport Form from \"react-bootstrap/Form\";\nimport { labelize } from './../../utils';\n\nconst NumberField = ({ prop, index, data, isNameValue = false, onValueChange }) => {\n    if (prop.type !== \"number\") return null;\n\n    return (\n        <Form.Group>\n            <Form.Label>{labelize(prop.name)}</Form.Label>\n            <Form.Control id={prop.name}\n                type={prop.type}\n                min={prop.min}\n                max={prop.max}\n                step={prop.step}\n                defaultValue={isNameValue ? data.value : data[prop.name]}\n                onChange={e => {\n                    if (!isNameValue) data[prop.name] = e.target.value;\n                    onValueChange({ ...data }, e.target.value);\n                }}\n                size=\"sm\"\n                required={prop.required} />\n        </Form.Group>\n    )\n}\nNumberField.propTypes = {\n    prop: PropTypes.object.isRequired,\n    index: PropTypes.number.isRequired,\n    data: PropTypes.object.isRequired,\n    isNameValue: PropTypes.bool,\n    onValueChange: PropTypes.func.isRequired,\n}\n\nexport default NumberField;\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types';\n\nimport Form from \"react-bootstrap/Form\";\nimport { labelize } from './../../utils';\n\nconst isDisabled = (option, value) => {\n    return !!option.selector && !!option.selectorRef \n        ? !new RegExp(option.selector).test(value)\n        : false;\n}\n\nconst SelectField = ({ prop, index, data, isNameValue = false, isDatasetField = false, onValueChange }) => {\n    const [isValid, setIsValid] = useState(true);\n    if (prop.type !== \"select\" || (!!prop.hideIfSingleOption && prop.hideIfSingleOption && prop.options?.length === 1)) return null;\n    \n    // special condition to reset options\n    const invalidOptValue = 'Select a valid Option...';\n\n    return (\n        <Form.Group>\n            <Form.Label>{labelize(prop.name.toLowerCase())}</Form.Label>\n            <Form.Control id={prop.name} as=\"select\"\n                defaultValue={isNameValue ? (data.value !== 0 ? data.value : prop.options[data.value].name) : data[prop.name]}\n                onChange={e => {\n                    const value = e.target.value;\n                    if (value === invalidOptValue) { \n                        setIsValid(false);\n                        return;\n                    }\n                    setIsValid(true);\n                    if (!isNameValue) data[prop.name] = value;\n                    onValueChange({ ...data }, e.target.value);\n                }}\n                size=\"sm\"\n                style={isValid ? null : { color: `#ccc` }}\n                required={prop.required}>\n                {prop.options && prop.options.sort((a, b) => a.name > b.name).map((o, k) => (\n                    <option \n                        key={`opt${k}`} \n                        value={o[prop.optionName]}\n                        title={!!prop.optionTitle ? (`${o[prop.optionTitle]}: ${o.description}`) : ''}\n                        disabled={isDisabled(o, data[o.selectorRef])}\n                        >\n                        {o[prop.optionName]}\n                    </option>\n                )\n                )}\n            </Form.Control>\n        </Form.Group>\n    )\n}\nSelectField.propTypes = {\n    prop: PropTypes.object.isRequired,\n    index: PropTypes.number.isRequired,\n    data: PropTypes.object.isRequired,\n    isNameValue: PropTypes.bool,\n    isDatasetField: PropTypes.bool,\n    onValueChange: PropTypes.func.isRequired,\n}\n\nexport default SelectField;\n","import React from 'react'\nimport PropTypes from 'prop-types';\n\nimport Form from \"react-bootstrap/Form\";\nimport { labelize } from '../../utils';\n\nconst InputField = ({ prop, index, data, isNameValue = false, onValueChange }) => {\n    if (prop.type !== \"input\") return null;\n\n    return (\n        <Form.Group>\n            <Form.Label>{labelize(prop.name.toLowerCase())}</Form.Label>\n            <Form.Control id={prop.name}\n                type={prop.type}\n                min={prop.min}\n                max={prop.max}\n                step={prop.step}\n                defaultValue={isNameValue ? data.value : data[prop.name]}\n                onChange={e => {\n                    if (!isNameValue) data[prop.name] = e.target.value;\n                    onValueChange({ ...data }, e.target.value);\n                }}\n                size=\"sm\"\n                required={prop.required} />\n        </Form.Group>\n    )\n}\nInputField.propTypes = {\n    prop: PropTypes.object.isRequired,\n    index: PropTypes.number.isRequired,\n    data: PropTypes.object.isRequired,\n    isNameValue: PropTypes.bool,\n    onValueChange: PropTypes.func.isRequired,\n}\n\nexport default InputField;\n","import React from 'react'\nimport PropTypes from 'prop-types';\n\nimport Form from \"react-bootstrap/Form\";\nimport { labelize } from './../../utils';\n\nconst BooleanField = ({ prop, index, data, onValueChange }) => {\n    if (prop.type !== \"checkbox\") return null;\n\n    return (\n        <Form.Group>\n            <Form.Check id={prop.name}\n                label={labelize(prop.name)}\n                type={prop.type}\n                defaultValue={data[prop.name]}\n                checked={data[prop.name]}\n                onChange={e => {\n                    data[prop.name] = e.target.checked;\n                    onValueChange({ ...data }, e.target.checked);\n                }}\n                size=\"sm\"\n                required={prop.required} />\n        </Form.Group>\n\n    )\n}\nBooleanField.propTypes = {\n    prop: PropTypes.object.isRequired,\n    index: PropTypes.number.isRequired,\n    data: PropTypes.object.isRequired,\n    onValueChange: PropTypes.func.isRequired,\n}\n\nexport default BooleanField;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst SourceReplacer = ({ source }) => {\n    const { description, replacements, annotations } = source;\n    \n    const maxWords = (value, max = 50) => {\n        return value.split(' ').length > max \n            ? value.split(' ', max).join(' ') + '...' \n            : value;\n    }\n\n    if ((!replacements.length || replacements.filter(r => !r.label.length || !r.url.length).length)\n        && (!annotations.length || annotations.filter(r => !r.label.length || !r.type.length).length)) {\n        return <span>{maxWords(description)}</span>;\n    }\n\n    const elements = [];\n    const replPositions = [];\n\n    const windowOpen = (e, url) => {\n        e.stopPropagation();\n        const win = window.open(url, '_blank');\n        win.focus();\n    }\n\n    replacements.filter(r => r.label.length && r.url.length).forEach((el, i) => {\n        const start = description.indexOf(el.label);\n        replPositions.push({\n            start: description.indexOf(el.label),\n            end: start + el.label.length,\n            url: el.url,\n            value: el.label,\n            type: \"link\",\n        });\n    });\n\n    annotations.filter(r => r.label.length && r.type.length).forEach((el, i) => {\n        const start = description.indexOf(el.label);\n        replPositions.push({\n            start: description.indexOf(el.label),\n            end: start + el.label.length,\n            value: el.label,\n            href: null,\n            type: el.type,\n        });\n    });\n\n    replPositions.sort((a, b) => a.start > b.start).forEach((pos, j, array) => {\n        if (j === 0 && pos.start > 0) {\n            elements.push({\n                start: 0,\n                type: 'text',\n                value: description.substring(0, pos.start),\n            });\n        }\n        elements.push({\n            type: pos.type,\n            href: pos.url,\n            value: pos.value,\n        });\n        if (j < replPositions.length - 1) {\n            elements.push({\n                start: 1,\n                type: 'text',\n                value: description.substring(pos.end, array[j + 1].start),\n            });\n        }\n        else if (j === replPositions.length - 1) {\n            elements.push({\n                start: -1,\n                type: 'text',\n                value: description.substring(pos.end),\n            });\n        }\n    });\n\n    return (\n        <p style={{ textAlign: \"justify\" }}>\n            {elements.map((e , i) => {\n                return (\n                    {\n                        // eslint-disable-next-line jsx-a11y/anchor-is-valid\n                        link: <a key={`a${i}`} href=\"#\" onClick={p => windowOpen(p, e.href)}>{e.value}</a>,\n                        text: <span key={`v${i}`}>{maxWords(e.value)}</span>,\n                        bold: <b key={`bv${i}`}>{e.value}</b>,\n                        strong: <s key={`bv${i}`}>{e.value}</s>,\n                        italic: <i key={`iv${i}`}>{e.value}</i>\n                    }[e.type]\n                )\n            })}\n        </p>\n    )\n}\nSourceReplacer.propTypes = {\n    source: PropTypes.object.isRequired\n}\n\nexport default SourceReplacer","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Carousel from 'react-bootstrap/Carousel';\n\nimport { srcImages } from '../utils';\n\nconst ImageCarousel = ({ prop }) => {\n    return (\n        <Carousel style={{ backgroundColor: `rgba(0,0,0,.03)` }}>\n            {prop.images.map((image, i) => {\n                const item = srcImages.files.find(srcImg => srcImg.indexOf(image.url) >= 0);\n                return <Carousel.Item key={`car${i}`}>\n                    <img src={item} alt={image.label} />\n                    <Carousel.Caption\n                        style={{\n                            position: `relative`,\n                            right: `0`,\n                            left: `0`,\n                            paddingTop: `0`,\n                        }}\n                    >\n                        <h6>\n                            <div style={{\n                                color: 'white',\n                                backgroundColor: '#6c757d',\n                                display: 'inline',\n                                paddingLeft: '12px',\n                                paddingRight: '12px',\n                                paddingBottom: '20px',\n                                opacity: '0.65',\n                            }}>\n                                {image.label}\n                            </div>\n                        </h6>\n                    </Carousel.Caption>\n                </Carousel.Item>\n            })}\n        </Carousel>\n    )\n}\nImageCarousel.propTypes = {\n    prop: PropTypes.object.isRequired,\n}\n\nexport default ImageCarousel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Card from \"react-bootstrap/Card\";\nimport SourceReplacer from '../components/source-replacer';\nimport ImageCarousel from './../components/image-carousel';\n\nimport { buildSource } from '../utils';\n\nconst HelpCard = ({ data }) => {\n    return (\n        <Card bg=\"dark\" text=\"light\">\n            <Card.Body>\n                <ul>\n                    {data?.properties\n                        .filter(p => \n                            !(p.type === \"select\" \n                            && (!!p.hideIfSingleOption && p.hideIfSingleOption && p.options?.length === 1))\n                        ).map((prop, index) => {\n                        if (!!prop.images && prop.images.length) {\n                            return (\n                                <div key={`help${prop.name}${index}`} style={{ marginBottom: `0` }}>\n                                    <ImageCarousel prop={prop} />\n                                </div>\n                            );\n                        }\n                        if (!!prop.itemProperties && prop.itemProperties.length) {\n                            return data.settings.map((sett, j) => {\n                                const arrProps = prop.itemProperties\n                                    .find(ip => ip.name === data[prop.refProperty]);\n\n                                if (!arrProps) return null;\n                                const arrProp = arrProps.properties.find(ap => ap.name === sett.name);\n\n                                return (\n                                    <li key={`help${sett.name}${j}`}>\n                                        <SourceReplacer source={buildSource(arrProp.description)} />\n                                    </li>\n                                )\n                            })\n                        }\n                        if (!!prop.description) {\n                            return (\n                                <li key={`help${prop.name}${index}`}>\n                                    <SourceReplacer source={buildSource(prop.description)} />\n                                </li>\n                            );\n                        }\n                        else return null;\n                    })}\n                </ul>\n            </Card.Body>\n        </Card>\n    )\n}\nHelpCard.propTypes = {\n    data: PropTypes.object.isRequired,\n}\n\nexport default HelpCard;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Card from \"react-bootstrap/Card\";\nimport Col from \"react-bootstrap/Col\";\n\nimport { faInfoCircle, faChevronCircleLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport Icon from '../components/icon';\nimport NumberField from './fields/number-field';\nimport SelectField from './fields/select-field';\nimport InputField from './fields/input-field';\nimport BooleanField from './fields/boolean-field';\nimport HelpCard from '../components/help-card';\n\nconst ChainForm = (props) => {\n    const { onSave, onCancel, onShowHelp } = props;\n    const [validated, setValidated] = useState(false);\n    const [data, setData] = useState(props.data);\n    const [visibleHelp, setVisibleHelp] = useState(false);\n\n    const updateSettings = (changedData, value) => {\n        const props = changedData.properties\n            .find(dp => dp.name === \"settings\")\n            .itemProperties\n            .find(ip => ip.name === value);\n\n        if (!props) changedData.settings = [];\n        else changedData.settings = props.properties.map(p => ({ name: p.name, value: p.default }));\n        setData({ ...changedData });\n    }\n\n    const handleSubmit = (event) => {\n        const form = event.currentTarget;\n\n        if (form.checkValidity() === false) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n        setValidated(true);\n\n        onSave({ ...data });\n    }\n\n    const handleSettings = (name, value) => {\n        const tmpSetts = [...data.settings];\n        tmpSetts.splice(tmpSetts.indexOf(data.settings.find(s => s.name === name)), 1, { name, value });\n        data.settings = [...tmpSetts];\n        setData({ ...data });\n    }\n\n    return (\n        <Card bg=\"light\" text=\"dark\" style={{ fontSize: `0.75rem`, border: `0 solid #ccc` }}>\n            <Card.Header style={{ padding: `0.25rem` }}>\n                <Button as=\"div\" size=\"sm\"\n                    onClick={e => {\n                        setVisibleHelp(!visibleHelp);\n                        onShowHelp(!visibleHelp);\n                    }}\n                    style={{\n                        backgroundColor: `Transparent`,\n                        color: `#343a40`,\n                        border: `0 solid white`,\n                        width: `auto`,\n                        height: `auto`,\n                        marginLeft: `0.5rem`\n                    }}>\n                    <Icon icon={visibleHelp ? faChevronCircleLeft : faInfoCircle} size=\"1x\" />\n                    <small title=\"Click to expand or collapse\">Help</small>\n                </Button>\n            </Card.Header>\n            <Card.Body>\n                <Form id=\"frmChain\" noValidate validated={validated} onSubmit={handleSubmit}>\n                    <Form.Row className=\"mb-2\">\n                        <Col>\n                            {data.properties.map((prop, index) => {\n                                return (\n                                    {\n                                        select: (\n                                            <SelectField key={`prop${prop.name}${index}`}\n                                                prop={prop}\n                                                index={index}\n                                                data={data}\n                                                onValueChange={(changedData, updatedValue) => {\n                                                    if (!!prop.refProperty) updateSettings(changedData, updatedValue);\n                                                }}\n                                            />\n                                        ),\n\n                                        array: (() => {\n                                            if (prop.type !== 'array') return null;\n\n                                            return data.settings.map((sett, j) => {\n                                                const arrProps = prop.itemProperties\n                                                    .find(ip => ip.name === data[prop.refProperty]);\n\n                                                if (!arrProps) return null;\n                                                const arrProp = arrProps.properties.find(ap => ap.name === sett.name);\n\n                                                return (\n                                                    {\n                                                        number: (\n                                                            <NumberField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        input: (\n                                                            <InputField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        checkbox: (\n                                                            <BooleanField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                onValueChange={(changedData, isChecked) => handleSettings(sett.name, isChecked)}\n                                                            />\n                                                        )\n\n                                                    }[arrProp.type]\n                                                )\n                                            })\n                                        })()\n\n                                    }[prop.type]\n                                )\n                            })}\n                        </Col>\n                        {visibleHelp && <Col lg={8}>\n                            <HelpCard data={data} />\n                        </Col>}\n                    </Form.Row>\n                    <Button id=\"save\" type=\"submit\" variant=\"outline-primary\" size=\"sm\" style={{ float: `right` }}>\n                        Save\n                    </Button>\n                    <Button id=\"cancel\" variant=\"outline-secondary\" size=\"sm\"\n                        onClick={onCancel}\n                        style={{ float: `right`, marginRight: `8px` }}>\n                        Cancel\n                    </Button>\n                </Form>\n            </Card.Body>\n        </Card >\n    )\n}\nChainForm.propTypes = {\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onShowHelp: PropTypes.func.isRequired,\n}\n\nexport default ChainForm;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport * as Blockly from 'blockly/core';\n\nimport BaseField from './BaseField';\n\nimport ModalDialog from '../components/modal';\nimport ChainForm from '../forms/chain-form';\n\nimport {\n    hydrate,\n    dehydrate,\n    groupTemplatesByParent,\n    platformTemplates,\n} from '../utils';\n\nconst blockTemplates = groupTemplatesByParent(platformTemplates());\n\nconst ModalForm = ({ title, data, onCancel, onSave }) => {\n    const [size, setSize] = useState(\"\");\n\n    const onShowHelp = (visible) => setSize(visible ? \"lg\" : \"\");\n\n    return <ModalDialog title={title} size={size} onCancel={onCancel}>\n        <ChainForm data={data} onSave={onSave} onCancel={onCancel} onShowHelp={onShowHelp} />\n    </ModalDialog>\n}\nModalForm.propTypes = {\n    title: PropTypes.string.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n}\n\nclass ChainField extends BaseField {\n\n    static fromJson(options) {\n        return new ChainField(dehydrate(options['data']));\n    }\n\n    SERIALIZABLE = true;\n\n    onSave = (values) => {\n        if (Object.keys(values).length) {\n            this.setValue(values);\n        }\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    onCancel = () => {\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    getText_() {\n        const keys = Object.keys(this.value_);\n        return this.value_[keys[0]];\n    };\n\n    fromXml(fieldElement) {\n        const value = dehydrate(fieldElement.textContent);\n\n        // re-assign available block templates as options for the select in case they are updated\n        value.properties\n            .find(p => p.name === \"template\")\n            .options = (blockTemplates\n                .find(bt => bt.blockName === \"custom_chain_field\")\n                .templates || [])\n                .filter(t => t.platform === this.getPlatform());\n        \n        this.setValue(value);\n    }\n\n    toXml(fieldElement) {\n        fieldElement.textContent = hydrate(this.value_);\n        return fieldElement;\n    }\n\n    render() {\n        return <ModalForm\n            title=\"Chain Settings\"\n            data={this.value_}\n            onCancel={this.onCancel}\n            onSave={this.onSave}\n        />\n    }\n}\n\nBlockly.fieldRegistry.register('chain_field', ChainField);\n\nexport default ChainField;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Card from \"react-bootstrap/Card\";\nimport Col from \"react-bootstrap/Col\";\n\nimport { faInfoCircle, faChevronCircleLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport Icon from '../components/icon';\nimport NumberField from './fields/number-field';\nimport SelectField from './fields/select-field';\nimport InputField from './fields/input-field';\nimport BooleanField from './fields/boolean-field';\nimport HelpCard from '../components/help-card';\n\nconst ChatMessageForm = (props) => {\n    const { onSave, onCancel, onShowHelp } = props;\n    const [validated, setValidated] = useState(false);\n    const [data, setData] = useState(props.data);\n    const [visibleHelp, setVisibleHelp] = useState(false);\n\n    const updateSettings = (changedData, value) => {\n        const props = changedData.properties\n            .find(dp => dp.name === \"settings\")\n            .itemProperties\n            .find(ip => ip.name === value);\n\n        if (!props) changedData.settings = [];\n        else changedData.settings = props.properties.map(p => ({ name: p.name, value: p.default }));\n        setData({ ...changedData });\n    }\n\n    const handleSubmit = (event) => {\n        const form = event.currentTarget;\n\n        if (form.checkValidity() === false) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n        setValidated(true);\n\n        onSave({ ...data });\n    }\n\n    const handleSettings = (name, value) => {\n        const tmpSetts = [...data.settings];\n        tmpSetts.splice(tmpSetts.indexOf(data.settings.find(s => s.name === name)), 1, { name, value });\n        data.settings = [...tmpSetts];\n        setData({ ...data });\n    }\n\n    return (\n        <Card bg=\"light\" text=\"dark\" style={{ fontSize: `0.75rem`, border: `0 solid #ccc` }}>\n            <Card.Header style={{ padding: `0.25rem` }}>\n                <Button as=\"div\" size=\"sm\"\n                    onClick={e => {\n                        setVisibleHelp(!visibleHelp);\n                        onShowHelp(!visibleHelp);\n                    }}\n                    style={{\n                        backgroundColor: `Transparent`,\n                        color: `#343a40`,\n                        border: `0 solid white`,\n                        width: `auto`,\n                        height: `auto`,\n                        marginLeft: `0.5rem`\n                    }}>\n                    <Icon icon={visibleHelp ? faChevronCircleLeft : faInfoCircle} size=\"1x\" />\n                    <small title=\"Click to expand or collapse\">Help</small>\n                </Button>\n            </Card.Header>\n            <Card.Body>\n                <Form id=\"frmChatMessage\" noValidate validated={validated} onSubmit={handleSubmit}>\n                    <Form.Row className=\"mb-2\">\n                        <Col>\n                            {data.properties.map((prop, index) => {\n                                return (\n                                    {\n                                        select: (\n                                            <SelectField key={`prop${prop.name}${index}`}\n                                                prop={prop}\n                                                index={index}\n                                                data={data}\n                                                onValueChange={(changedData, updatedValue) => {\n                                                    if (!!prop.refProperty) updateSettings(changedData, updatedValue);\n                                                }}\n                                            />\n                                        ),\n\n                                        array: (() => {\n                                            if (prop.type !== 'array') return null;\n\n                                            return data.settings.map((sett, j) => {\n                                                const arrProps = prop.itemProperties\n                                                    .find(ip => ip.name === data[prop.refProperty]);\n\n                                                if (!arrProps) return null;\n                                                const arrProp = arrProps.properties.find(ap => ap.name === sett.name);\n\n                                                return (\n                                                    {\n                                                        number: (\n                                                            <NumberField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        input: (\n                                                            <InputField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        checkbox: (\n                                                            <BooleanField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                onValueChange={(changedData, isChecked) => handleSettings(sett.name, isChecked)}\n                                                            />\n                                                        )\n\n                                                    }[arrProp.type]\n                                                )\n                                            })\n                                        })()\n\n                                    }[prop.type]\n                                )\n                            })}\n                        </Col>\n                        {visibleHelp && <Col lg={8}>\n                            <HelpCard data={data} />\n                        </Col>}\n                    </Form.Row>\n                    <Button id=\"save\" type=\"submit\" variant=\"outline-primary\" size=\"sm\" style={{ float: `right` }}>\n                        Save\n                    </Button>\n                    <Button id=\"cancel\" variant=\"outline-secondary\" size=\"sm\"\n                        onClick={onCancel}\n                        style={{ float: `right`, marginRight: `8px` }}>\n                        Cancel\n                    </Button>\n                </Form>\n            </Card.Body>\n        </Card >\n    )\n}\nChatMessageForm.propTypes = {\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onShowHelp: PropTypes.func.isRequired,\n}\n\nexport default ChatMessageForm;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport * as Blockly from 'blockly/core';\n\nimport BaseField from './BaseField';\n\nimport ModalDialog from '../components/modal';\nimport ChatMessageForm from '../forms/chatmessage-form';\n\nimport {\n    hydrate,\n    dehydrate,\n    groupTemplatesByParent,\n    platformTemplates,\n} from '../utils';\n\nconst blockTemplates = groupTemplatesByParent(platformTemplates());\n\nconst ModalForm = ({ title, data, onCancel, onSave }) => {\n    const [size, setSize] = useState(\"\");\n\n    const onShowHelp = (visible) => setSize(visible ? \"lg\" : \"\");\n\n    return <ModalDialog title={title} size={size} onCancel={onCancel}>\n        <ChatMessageForm data={data} onSave={onSave} onCancel={onCancel} onShowHelp={onShowHelp} />\n    </ModalDialog>\n}\nModalForm.propTypes = {\n    title: PropTypes.string.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n}\n\nclass ChatMessageField extends BaseField {\n\n    static fromJson(options) {\n        return new ChatMessageField(dehydrate(options['data']));\n    }\n\n    SERIALIZABLE = true;\n\n    onSave = (values) => {\n        if (Object.keys(values).length) {\n            this.setValue(values);\n        }\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    onCancel = () => {\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    getText_() {\n        const keys = Object.keys(this.value_);\n        return this.value_[keys[0]];\n    };\n\n    fromXml(fieldElement) {\n        const value = dehydrate(fieldElement.textContent);\n        \n        // re-assign available block templates as options for the select in case they are updated\n        value.properties\n            .find(p => p.name === \"template\")\n            .options = blockTemplates\n                .find(bt => bt.blockName === \"custom_chat_message_field\")\n                .templates\n                .filter(t => t.platform === this.getPlatform());\n        \n        this.setValue(value);\n    }\n\n    toXml(fieldElement) {\n        fieldElement.textContent = hydrate(this.value_);\n        return fieldElement;\n    }\n\n    render() {\n        return <ModalForm\n            title=\"Chat Message Settings\"\n            data={this.value_}\n            onCancel={this.onCancel}\n            onSave={this.onSave}\n        />\n    }\n}\n\nBlockly.fieldRegistry.register('chat_message_field', ChatMessageField);\n\nexport default ChatMessageField;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Card from \"react-bootstrap/Card\";\nimport Col from \"react-bootstrap/Col\";\n\nimport { faInfoCircle, faChevronCircleLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport Icon from '../components/icon';\nimport NumberField from './fields/number-field';\nimport SelectField from './fields/select-field';\nimport InputField from './fields/input-field';\nimport BooleanField from './fields/boolean-field';\nimport HelpCard from '../components/help-card';\n\nconst ChatModelForm = (props) => {\n    const { onSave, onCancel, onShowHelp } = props;\n    const [validated, setValidated] = useState(false);\n    const [data, setData] = useState(props.data);\n    const [visibleHelp, setVisibleHelp] = useState(false);\n\n    const updateSettings = (changedData, value) => {\n        const props = changedData.properties\n            .find(dp => dp.name === \"settings\")\n            .itemProperties\n            .find(ip => ip.name === value);\n\n        if (!props) changedData.settings = [];\n        else changedData.settings = props.properties.map(p => ({ name: p.name, value: p.default }));\n        setData({ ...changedData });\n    }\n\n    const handleSubmit = (event) => {\n        const form = event.currentTarget;\n\n        if (form.checkValidity() === false) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n        setValidated(true);\n\n        onSave({ ...data });\n    }\n\n    const handleSettings = (name, value) => {\n        const tmpSetts = [...data.settings];\n        tmpSetts.splice(tmpSetts.indexOf(data.settings.find(s => s.name === name)), 1, { name, value });\n        data.settings = [...tmpSetts];\n        setData({ ...data });\n    }\n\n    return (\n        <Card bg=\"light\" text=\"dark\" style={{ fontSize: `0.75rem`, border: `0 solid #ccc` }}>\n            <Card.Header style={{ padding: `0.25rem` }}>\n                <Button as=\"div\" size=\"sm\"\n                    onClick={e => {\n                        setVisibleHelp(!visibleHelp);\n                        onShowHelp(!visibleHelp);\n                    }}\n                    style={{\n                        backgroundColor: `Transparent`,\n                        color: `#343a40`,\n                        border: `0 solid white`,\n                        width: `auto`,\n                        height: `auto`,\n                        marginLeft: `0.5rem`\n                    }}>\n                    <Icon icon={visibleHelp ? faChevronCircleLeft : faInfoCircle} size=\"1x\" />\n                    <small title=\"Click to expand or collapse\">Help</small>\n                </Button>\n            </Card.Header>\n            <Card.Body>\n                <Form id=\"frmChatModel\" noValidate validated={validated} onSubmit={handleSubmit}>\n                    <Form.Row className=\"mb-2\">\n                        <Col>\n                            {data.properties.map((prop, index) => {\n                                return (\n                                    {\n                                        select: (\n                                            <SelectField key={`prop${prop.name}${index}`}\n                                                prop={prop}\n                                                index={index}\n                                                data={data}\n                                                onValueChange={(changedData, updatedValue) => {\n                                                    if (!!prop.refProperty) updateSettings(changedData, updatedValue);\n                                                }}\n                                            />\n                                        ),\n\n                                        array: (() => {\n                                            if (prop.type !== 'array') return null;\n\n                                            return data.settings.map((sett, j) => {\n                                                const arrProps = prop.itemProperties\n                                                    .find(ip => ip.name === data[prop.refProperty]);\n\n                                                if (!arrProps) return null;\n                                                const arrProp = arrProps.properties.find(ap => ap.name === sett.name);\n\n                                                return (\n                                                    {\n                                                        number: (\n                                                            <NumberField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        input: (\n                                                            <InputField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        checkbox: (\n                                                            <BooleanField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                onValueChange={(changedData, isChecked) => handleSettings(sett.name, isChecked)}\n                                                            />\n                                                        )\n\n                                                    }[arrProp.type]\n                                                )\n                                            })\n                                        })()\n\n                                    }[prop.type]\n                                )\n                            })}\n                        </Col>\n                        {visibleHelp && <Col lg={8}>\n                            <HelpCard data={data} />\n                        </Col>}\n                    </Form.Row>\n                    <Button id=\"save\" type=\"submit\" variant=\"outline-primary\" size=\"sm\" style={{ float: `right` }}>\n                        Save\n                    </Button>\n                    <Button id=\"cancel\" variant=\"outline-secondary\" size=\"sm\"\n                        onClick={onCancel}\n                        style={{ float: `right`, marginRight: `8px` }}>\n                        Cancel\n                    </Button>\n                </Form>\n            </Card.Body>\n        </Card >\n    )\n}\nChatModelForm.propTypes = {\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onShowHelp: PropTypes.func.isRequired,\n}\n\nexport default ChatModelForm;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport * as Blockly from 'blockly/core';\n\nimport BaseField from './BaseField';\n\nimport ModalDialog from '../components/modal';\nimport ChatModelForm from '../forms/chatmodel-form';\n\nimport {\n    hydrate,\n    dehydrate,\n    groupTemplatesByParent,\n    platformTemplates,\n} from '../utils';\n\nconst blockTemplates = groupTemplatesByParent(platformTemplates());\n\nconst ModalForm = ({ title, data, onCancel, onSave }) => {\n    const [size, setSize] = useState(\"\");\n\n    const onShowHelp = (visible) => setSize(visible ? \"lg\" : \"\");\n\n    return <ModalDialog title={title} size={size} onCancel={onCancel}>\n        <ChatModelForm data={data} onSave={onSave} onCancel={onCancel} onShowHelp={onShowHelp} />\n    </ModalDialog>\n}\nModalForm.propTypes = {\n    title: PropTypes.string.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n}\n\nclass ChatModelField extends BaseField {\n\n    static fromJson(options) {\n        return new ChatModelField(dehydrate(options['data']));\n    }\n\n    SERIALIZABLE = true;\n\n    onSave = (values) => {\n        if (Object.keys(values).length) {\n            this.setValue(values);\n        }\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    onCancel = () => {\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    getText_() {\n        const keys = Object.keys(this.value_);\n        return this.value_[keys[0]];\n    };\n\n    fromXml(fieldElement) {\n        const value = dehydrate(fieldElement.textContent);\n        \n        // re-assign available block templates as options for the select in case they are updated\n        value.properties\n            .find(p => p.name === \"template\")\n            .options = blockTemplates\n                .find(bt => bt.blockName === \"custom_chat_model_field\")\n                .templates\n                .filter(t => t.platform === this.getPlatform());\n        \n        this.setValue(value);\n    }\n\n    toXml(fieldElement) {\n        fieldElement.textContent = hydrate(this.value_);\n        return fieldElement;\n    }\n\n    render() {\n        return <ModalForm\n            title=\"Chat Model Settings\"\n            data={this.value_}\n            onCancel={this.onCancel}\n            onSave={this.onSave}\n        />\n    }\n}\n\nBlockly.fieldRegistry.register('chat_model_field', ChatModelField);\n\nexport default ChatModelField;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Card from \"react-bootstrap/Card\";\nimport Col from \"react-bootstrap/Col\";\n\nimport { faInfoCircle, faChevronCircleLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport Icon from '../components/icon';\nimport NumberField from './fields/number-field';\nimport SelectField from './fields/select-field';\nimport InputField from './fields/input-field';\nimport BooleanField from './fields/boolean-field';\nimport HelpCard from '../components/help-card';\n\nconst ChatPromptForm = (props) => {\n    const { onSave, onCancel, onShowHelp } = props;\n    const [validated, setValidated] = useState(false);\n    const [data, setData] = useState(props.data);\n    const [visibleHelp, setVisibleHelp] = useState(false);\n\n    const updateSettings = (changedData, value) => {\n        const props = changedData.properties\n            .find(dp => dp.name === \"settings\")\n            .itemProperties\n            .find(ip => ip.name === value);\n\n        if (!props) changedData.settings = [];\n        else changedData.settings = props.properties.map(p => ({ name: p.name, value: p.default }));\n        setData({ ...changedData });\n    }\n\n    const handleSubmit = (event) => {\n        const form = event.currentTarget;\n\n        if (form.checkValidity() === false) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n        setValidated(true);\n\n        onSave({ ...data });\n    }\n\n    const handleSettings = (name, value) => {\n        const tmpSetts = [...data.settings];\n        tmpSetts.splice(tmpSetts.indexOf(data.settings.find(s => s.name === name)), 1, { name, value });\n        data.settings = [...tmpSetts];\n        setData({ ...data });\n    }\n\n    return (\n        <Card bg=\"light\" text=\"dark\" style={{ fontSize: `0.75rem`, border: `0 solid #ccc` }}>\n            <Card.Header style={{ padding: `0.25rem` }}>\n                <Button as=\"div\" size=\"sm\"\n                    onClick={e => {\n                        setVisibleHelp(!visibleHelp);\n                        onShowHelp(!visibleHelp);\n                    }}\n                    style={{\n                        backgroundColor: `Transparent`,\n                        color: `#343a40`,\n                        border: `0 solid white`,\n                        width: `auto`,\n                        height: `auto`,\n                        marginLeft: `0.5rem`\n                    }}>\n                    <Icon icon={visibleHelp ? faChevronCircleLeft : faInfoCircle} size=\"1x\" />\n                    <small title=\"Click to expand or collapse\">Help</small>\n                </Button>\n            </Card.Header>\n            <Card.Body>\n                <Form id=\"frmChatPrompt\" noValidate validated={validated} onSubmit={handleSubmit}>\n                    <Form.Row className=\"mb-2\">\n                        <Col>\n                            {data.properties.map((prop, index) => {\n                                return (\n                                    {\n                                        select: (\n                                            <SelectField key={`prop${prop.name}${index}`}\n                                                prop={prop}\n                                                index={index}\n                                                data={data}\n                                                onValueChange={(changedData, updatedValue) => {\n                                                    if (!!prop.refProperty) updateSettings(changedData, updatedValue);\n                                                }}\n                                            />\n                                        ),\n\n                                        array: (() => {\n                                            if (prop.type !== 'array') return null;\n\n                                            return data.settings.map((sett, j) => {\n                                                const arrProps = prop.itemProperties\n                                                    .find(ip => ip.name === data[prop.refProperty]);\n\n                                                if (!arrProps) return null;\n                                                const arrProp = arrProps.properties.find(ap => ap.name === sett.name);\n\n                                                return (\n                                                    {\n                                                        number: (\n                                                            <NumberField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        input: (\n                                                            <InputField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        checkbox: (\n                                                            <BooleanField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                onValueChange={(changedData, isChecked) => handleSettings(sett.name, isChecked)}\n                                                            />\n                                                        )\n\n                                                    }[arrProp.type]\n                                                )\n                                            })\n                                        })()\n\n                                    }[prop.type]\n                                )\n                            })}\n                        </Col>\n                        {visibleHelp && <Col lg={8}>\n                            <HelpCard data={data} />\n                        </Col>}\n                    </Form.Row>\n                    <Button id=\"save\" type=\"submit\" variant=\"outline-primary\" size=\"sm\" style={{ float: `right` }}>\n                        Save\n                    </Button>\n                    <Button id=\"cancel\" variant=\"outline-secondary\" size=\"sm\"\n                        onClick={onCancel}\n                        style={{ float: `right`, marginRight: `8px` }}>\n                        Cancel\n                    </Button>\n                </Form>\n            </Card.Body>\n        </Card >\n    )\n}\nChatPromptForm.propTypes = {\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onShowHelp: PropTypes.func.isRequired,\n}\n\nexport default ChatPromptForm;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport * as Blockly from 'blockly/core';\n\nimport BaseField from './BaseField';\n\nimport ModalDialog from '../components/modal';\nimport ChatPromptForm from '../forms/chatprompt-form';\n\nimport {\n    hydrate,\n    dehydrate,\n    groupTemplatesByParent,\n    platformTemplates,\n} from '../utils';\n\nconst blockTemplates = groupTemplatesByParent(platformTemplates());\n\nconst ModalForm = ({ title, data, onCancel, onSave }) => {\n    const [size, setSize] = useState(\"\");\n\n    const onShowHelp = (visible) => setSize(visible ? \"lg\" : \"\");\n\n    return <ModalDialog title={title} size={size} onCancel={onCancel}>\n        <ChatPromptForm data={data} onSave={onSave} onCancel={onCancel} onShowHelp={onShowHelp} />\n    </ModalDialog>\n}\nModalForm.propTypes = {\n    title: PropTypes.string.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n}\n\nclass ChatPromptField extends BaseField {\n\n    static fromJson(options) {\n        return new ChatPromptField(dehydrate(options['data']));\n    }\n\n    SERIALIZABLE = true;\n\n    onSave = (values) => {\n        if (Object.keys(values).length) {\n            this.setValue(values);\n        }\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    onCancel = () => {\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    getText_() {\n        const keys = Object.keys(this.value_);\n        return this.value_[keys[0]];\n    };\n\n    fromXml(fieldElement) {\n        const value = dehydrate(fieldElement.textContent);\n        \n        // re-assign available block templates as options for the select in case they are updated\n        value.properties\n            .find(p => p.name === \"template\")\n            .options = blockTemplates\n                .find(bt => bt.blockName === \"custom_chat_prompt_field\")\n                .templates\n                .filter(t => t.platform === this.getPlatform());\n        \n        this.setValue(value);\n    }\n\n    toXml(fieldElement) {\n        fieldElement.textContent = hydrate(this.value_);\n        return fieldElement;\n    }\n\n    render() {\n        return <ModalForm\n            title=\"Chat Prompt Settings\"\n            data={this.value_}\n            onCancel={this.onCancel}\n            onSave={this.onSave}\n        />\n    }\n}\n\nBlockly.fieldRegistry.register('chat_prompt_field', ChatPromptField);\n\nexport default ChatPromptField;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Card from \"react-bootstrap/Card\";\nimport Col from \"react-bootstrap/Col\";\n\nimport { faInfoCircle, faChevronCircleLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport Icon from '../components/icon';\nimport NumberField from './fields/number-field';\nimport SelectField from './fields/select-field';\nimport InputField from './fields/input-field';\nimport BooleanField from './fields/boolean-field';\nimport HelpCard from '../components/help-card';\n\nconst EmbeddingForm = (props) => {\n    const { onSave, onCancel, onShowHelp } = props;\n    const [validated, setValidated] = useState(false);\n    const [data, setData] = useState(props.data);\n    const [visibleHelp, setVisibleHelp] = useState(false);\n\n    const updateSettings = (changedData, value) => {\n        const props = changedData.properties\n            .find(dp => dp.name === \"settings\")\n            .itemProperties\n            .find(ip => ip.name === value);\n\n        if (!props) changedData.settings = [];\n        else changedData.settings = props.properties.map(p => ({ name: p.name, value: p.default }));\n        setData({ ...changedData });\n    }\n\n    const handleSubmit = (event) => {\n        const form = event.currentTarget;\n\n        if (form.checkValidity() === false) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n        setValidated(true);\n\n        onSave({ ...data });\n    }\n\n    const handleSettings = (name, value) => {\n        const tmpSetts = [...data.settings];\n        tmpSetts.splice(tmpSetts.indexOf(data.settings.find(s => s.name === name)), 1, { name, value });\n        data.settings = [...tmpSetts];\n        setData({ ...data });\n    }\n\n    return (\n        <Card bg=\"light\" text=\"dark\" style={{ fontSize: `0.75rem`, border: `0 solid #ccc` }}>\n            <Card.Header style={{ padding: `0.25rem` }}>\n                <Button as=\"div\" size=\"sm\"\n                    onClick={e => {\n                        setVisibleHelp(!visibleHelp);\n                        onShowHelp(!visibleHelp);\n                    }}\n                    style={{\n                        backgroundColor: `Transparent`,\n                        color: `#343a40`,\n                        border: `0 solid white`,\n                        width: `auto`,\n                        height: `auto`,\n                        marginLeft: `0.5rem`\n                    }}>\n                    <Icon icon={visibleHelp ? faChevronCircleLeft : faInfoCircle} size=\"1x\" />\n                    <small title=\"Click to expand or collapse\">Help</small>\n                </Button>\n            </Card.Header>\n            <Card.Body>\n                <Form id=\"frmEmbedding\" noValidate validated={validated} onSubmit={handleSubmit}>\n                    <Form.Row className=\"mb-2\">\n                        <Col>\n                            {data.properties.map((prop, index) => {\n                                return (\n                                    {\n                                        select: (\n                                            <SelectField key={`prop${prop.name}${index}`}\n                                                prop={prop}\n                                                index={index}\n                                                data={data}\n                                                onValueChange={(changedData, updatedValue) => {\n                                                    if (!!prop.refProperty) updateSettings(changedData, updatedValue);\n                                                }}\n                                            />\n                                        ),\n\n                                        array: (() => {\n                                            if (prop.type !== 'array') return null;\n\n                                            return data.settings.map((sett, j) => {\n                                                const arrProps = prop.itemProperties\n                                                    .find(ip => ip.name === data[prop.refProperty]);\n\n                                                if (!arrProps) return null;\n                                                const arrProp = arrProps.properties.find(ap => ap.name === sett.name);\n\n                                                return (\n                                                    {\n                                                        number: (\n                                                            <NumberField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        input: (\n                                                            <InputField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        checkbox: (\n                                                            <BooleanField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                onValueChange={(changedData, isChecked) => handleSettings(sett.name, isChecked)}\n                                                            />\n                                                        )\n\n                                                    }[arrProp.type]\n                                                )\n                                            })\n                                        })()\n\n                                    }[prop.type]\n                                )\n                            })}\n                        </Col>\n                        {visibleHelp && <Col lg={8}>\n                            <HelpCard data={data} />\n                        </Col>}\n                    </Form.Row>\n                    <Button id=\"save\" type=\"submit\" variant=\"outline-primary\" size=\"sm\" style={{ float: `right` }}>\n                        Save\n                    </Button>\n                    <Button id=\"cancel\" variant=\"outline-secondary\" size=\"sm\"\n                        onClick={onCancel}\n                        style={{ float: `right`, marginRight: `8px` }}>\n                        Cancel\n                    </Button>\n                </Form>\n            </Card.Body>\n        </Card >\n    )\n}\nEmbeddingForm.propTypes = {\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onShowHelp: PropTypes.func.isRequired,\n}\n\nexport default EmbeddingForm;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport * as Blockly from 'blockly/core';\n\nimport BaseField from './BaseField';\n\nimport ModalDialog from '../components/modal';\nimport EmbeddingForm from '../forms/embedding-form';\n\nimport {\n    hydrate,\n    dehydrate,\n    groupTemplatesByParent,\n    platformTemplates,\n} from '../utils';\n\nconst blockTemplates = groupTemplatesByParent(platformTemplates());\n\nconst ModalForm = ({ title, data, onCancel, onSave }) => {\n    const [size, setSize] = useState(\"\");\n\n    const onShowHelp = (visible) => setSize(visible ? \"lg\" : \"\");\n\n    return <ModalDialog title={title} size={size} onCancel={onCancel}>\n        <EmbeddingForm data={data} onSave={onSave} onCancel={onCancel} onShowHelp={onShowHelp} />\n    </ModalDialog>\n}\nModalForm.propTypes = {\n    title: PropTypes.string.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n}\n\nclass EmbeddingField extends BaseField {\n\n    static fromJson(options) {\n        return new EmbeddingField(dehydrate(options['data']));\n    }\n\n    SERIALIZABLE = true;\n\n    onSave = (values) => {\n        if (Object.keys(values).length) {\n            this.setValue(values);\n        }\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    onCancel = () => {\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    getText_() {\n        const keys = Object.keys(this.value_);\n        return this.value_[keys[0]];\n    };\n\n    fromXml(fieldElement) {\n        const value = dehydrate(fieldElement.textContent);\n        \n        // re-assign available block templates as options for the select in case they are updated\n        value.properties\n            .find(p => p.name === \"template\")\n            .options = blockTemplates\n                .find(bt => bt.blockName === \"custom_embedding_field\")\n                .templates\n                .filter(t => t.platform === this.getPlatform());\n        \n        this.setValue(value);\n    }\n\n    toXml(fieldElement) {\n        fieldElement.textContent = hydrate(this.value_);\n        return fieldElement;\n    }\n\n    render() {\n        return <ModalForm\n            title=\"Embedding Settings\"\n            data={this.value_}\n            onCancel={this.onCancel}\n            onSave={this.onSave}\n        />\n    }\n}\n\nBlockly.fieldRegistry.register('embedding_field', EmbeddingField);\n\nexport default EmbeddingField;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Card from \"react-bootstrap/Card\";\nimport Col from \"react-bootstrap/Col\";\n\nimport { faInfoCircle, faChevronCircleLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport Icon from '../components/icon';\nimport NumberField from './fields/number-field';\nimport SelectField from './fields/select-field';\nimport InputField from './fields/input-field';\nimport BooleanField from './fields/boolean-field';\nimport HelpCard from '../components/help-card';\n\nconst LlmForm = (props) => {\n    const { onSave, onCancel, onShowHelp } = props;\n    const [validated, setValidated] = useState(false);\n    const [data, setData] = useState(props.data);\n    const [visibleHelp, setVisibleHelp] = useState(false);\n\n    const updateSettings = (changedData, value) => {\n        const props = changedData.properties\n            .find(dp => dp.name === \"settings\")\n            .itemProperties\n            .find(ip => ip.name === value);\n\n        if (!props) changedData.settings = [];\n        else changedData.settings = props.properties.map(p => ({ name: p.name, value: p.default }));\n        setData({ ...changedData });\n    }\n\n    const handleSubmit = (event) => {\n        const form = event.currentTarget;\n\n        if (form.checkValidity() === false) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n        setValidated(true);\n\n        onSave({ ...data });\n    }\n\n    const handleSettings = (name, value) => {\n        const tmpSetts = [...data.settings];\n        tmpSetts.splice(tmpSetts.indexOf(data.settings.find(s => s.name === name)), 1, { name, value });\n        data.settings = [...tmpSetts];\n        setData({ ...data });\n    }\n\n    return (\n        <Card bg=\"light\" text=\"dark\" style={{ fontSize: `0.75rem`, border: `0 solid #ccc` }}>\n            <Card.Header style={{ padding: `0.25rem` }}>\n                <Button as=\"div\" size=\"sm\"\n                    onClick={e => {\n                        setVisibleHelp(!visibleHelp);\n                        onShowHelp(!visibleHelp);\n                    }}\n                    style={{\n                        backgroundColor: `Transparent`,\n                        color: `#343a40`,\n                        border: `0 solid white`,\n                        width: `auto`,\n                        height: `auto`,\n                        marginLeft: `0.5rem`\n                    }}>\n                    <Icon icon={visibleHelp ? faChevronCircleLeft : faInfoCircle} size=\"1x\" />\n                    <small title=\"Click to expand or collapse\">Help</small>\n                </Button>\n            </Card.Header>\n            <Card.Body>\n                <Form id=\"frmLlm\" noValidate validated={validated} onSubmit={handleSubmit}>\n                    <Form.Row className=\"mb-2\">\n                        <Col>\n                            {data.properties.map((prop, index) => {\n                                return (\n                                    {\n                                        select: (\n                                            <SelectField key={`prop${prop.name}${index}`}\n                                                prop={prop}\n                                                index={index}\n                                                data={data}\n                                                onValueChange={(changedData, updatedValue) => {\n                                                    if (!!prop.refProperty) updateSettings(changedData, updatedValue);\n                                                }}\n                                            />\n                                        ),\n\n                                        array: (() => {\n                                            if (prop.type !== 'array') return null;\n\n                                            return data.settings.map((sett, j) => {\n                                                const arrProps = prop.itemProperties\n                                                    .find(ip => ip.name === data[prop.refProperty]);\n\n                                                if (!arrProps) return null;\n                                                const arrProp = arrProps.properties.find(ap => ap.name === sett.name);\n\n                                                return (\n                                                    {\n                                                        number: (\n                                                            <NumberField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        input: (\n                                                            <InputField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        checkbox: (\n                                                            <BooleanField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                onValueChange={(changedData, isChecked) => handleSettings(sett.name, isChecked)}\n                                                            />\n                                                        )\n\n                                                    }[arrProp.type]\n                                                )\n                                            })\n                                        })()\n\n                                    }[prop.type]\n                                )\n                            })}\n                        </Col>\n                        {visibleHelp && <Col lg={8}>\n                            <HelpCard data={data} />\n                        </Col>}\n                    </Form.Row>\n                    <Button id=\"save\" type=\"submit\" variant=\"outline-primary\" size=\"sm\" style={{ float: `right` }}>\n                        Save\n                    </Button>\n                    <Button id=\"cancel\" variant=\"outline-secondary\" size=\"sm\"\n                        onClick={onCancel}\n                        style={{ float: `right`, marginRight: `8px` }}>\n                        Cancel\n                    </Button>\n                </Form>\n            </Card.Body>\n        </Card >\n    )\n}\nLlmForm.propTypes = {\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onShowHelp: PropTypes.func.isRequired,\n}\n\nexport default LlmForm;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport * as Blockly from 'blockly/core';\n\nimport BaseField from './BaseField';\n\nimport ModalDialog from '../components/modal';\nimport LlmForm from '../forms/llm-form';\n\nimport {\n    hydrate,\n    dehydrate,\n    groupTemplatesByParent,\n    platformTemplates,\n} from '../utils';\n\nconst blockTemplates = groupTemplatesByParent(platformTemplates());\n\nconst ModalForm = ({ title, data, onCancel, onSave }) => {\n    const [size, setSize] = useState(\"\");\n\n    const onShowHelp = (visible) => setSize(visible ? \"lg\" : \"\");\n\n    return <ModalDialog title={title} size={size} onCancel={onCancel}>\n        <LlmForm data={data} onSave={onSave} onCancel={onCancel} onShowHelp={onShowHelp} />\n    </ModalDialog>\n}\nModalForm.propTypes = {\n    title: PropTypes.string.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n}\n\nclass LlmField extends BaseField {\n\n    static fromJson(options) {\n        return new LlmField(dehydrate(options['data']));\n    }\n\n    SERIALIZABLE = true;\n\n    onSave = (values) => {\n        if (Object.keys(values).length) {\n            this.setValue(values);\n        }\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    onCancel = () => {\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    getText_() {\n        const keys = Object.keys(this.value_);\n        return this.value_[keys[0]];\n    };\n\n    fromXml(fieldElement) {\n        const value = dehydrate(fieldElement.textContent);\n        \n        // re-assign available block templates as options for the select in case they are updated\n        value.properties\n            .find(p => p.name === \"template\")\n            .options = blockTemplates\n                .find(bt => bt.blockName === \"custom_llm_field\")\n                .templates\n                .filter(t => t.platform === this.getPlatform());\n        \n        this.setValue(value);\n    }\n\n    toXml(fieldElement) {\n        fieldElement.textContent = hydrate(this.value_);\n        return fieldElement;\n    }\n\n    render() {\n        return <ModalForm\n            title=\"Llm Settings\"\n            data={this.value_}\n            onCancel={this.onCancel}\n            onSave={this.onSave}\n        />\n    }\n}\n\nBlockly.fieldRegistry.register('llm_field', LlmField);\n\nexport default LlmField;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Card from \"react-bootstrap/Card\";\nimport Col from \"react-bootstrap/Col\";\n\nimport { faInfoCircle, faChevronCircleLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport Icon from '../components/icon';\nimport NumberField from './fields/number-field';\nimport SelectField from './fields/select-field';\nimport InputField from './fields/input-field';\nimport BooleanField from './fields/boolean-field';\nimport HelpCard from '../components/help-card';\n\nconst LoaderForm = (props) => {\n    const { onSave, onCancel, onShowHelp } = props;\n    const [validated, setValidated] = useState(false);\n    const [data, setData] = useState(props.data);\n    const [visibleHelp, setVisibleHelp] = useState(false);\n\n    const updateSettings = (changedData, value) => {\n        const props = changedData.properties\n            .find(dp => dp.name === \"settings\")\n            .itemProperties\n            .find(ip => ip.name === value);\n\n        if (!props) changedData.settings = [];\n        else changedData.settings = props.properties.map(p => ({ name: p.name, value: p.default }));\n        setData({ ...changedData });\n    }\n\n    const handleSubmit = (event) => {\n        const form = event.currentTarget;\n\n        if (form.checkValidity() === false) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n        setValidated(true);\n\n        onSave({ ...data });\n    }\n\n    const handleSettings = (name, value) => {\n        const tmpSetts = [...data.settings];\n        tmpSetts.splice(tmpSetts.indexOf(data.settings.find(s => s.name === name)), 1, { name, value });\n        data.settings = [...tmpSetts];\n        setData({ ...data });\n    }\n\n    return (\n        <Card bg=\"light\" text=\"dark\" style={{ fontSize: `0.75rem`, border: `0 solid #ccc` }}>\n            <Card.Header style={{ padding: `0.25rem` }}>\n                <Button as=\"div\" size=\"sm\"\n                    onClick={e => {\n                        setVisibleHelp(!visibleHelp);\n                        onShowHelp(!visibleHelp);\n                    }}\n                    style={{\n                        backgroundColor: `Transparent`,\n                        color: `#343a40`,\n                        border: `0 solid white`,\n                        width: `auto`,\n                        height: `auto`,\n                        marginLeft: `0.5rem`\n                    }}>\n                    <Icon icon={visibleHelp ? faChevronCircleLeft : faInfoCircle} size=\"1x\" />\n                    <small title=\"Click to expand or collapse\">Help</small>\n                </Button>\n            </Card.Header>\n            <Card.Body>\n                <Form id=\"frmLoader\" noValidate validated={validated} onSubmit={handleSubmit}>\n                    <Form.Row className=\"mb-2\">\n                        <Col>\n                            {data.properties.map((prop, index) => {\n                                return (\n                                    {\n                                        select: (\n                                            <SelectField key={`prop${prop.name}${index}`}\n                                                prop={prop}\n                                                index={index}\n                                                data={data}\n                                                onValueChange={(changedData, updatedValue) => {\n                                                    if (!!prop.refProperty) updateSettings(changedData, updatedValue);\n                                                }}\n                                            />\n                                        ),\n\n                                        array: (() => {\n                                            if (prop.type !== 'array') return null;\n\n                                            return data.settings.map((sett, j) => {\n                                                const arrProps = prop.itemProperties\n                                                    .find(ip => ip.name === data[prop.refProperty]);\n\n                                                if (!arrProps) return null;\n                                                const arrProp = arrProps.properties.find(ap => ap.name === sett.name);\n\n                                                return (\n                                                    {\n                                                        number: (\n                                                            <NumberField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        input: (\n                                                            <InputField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        checkbox: (\n                                                            <BooleanField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                onValueChange={(changedData, isChecked) => handleSettings(sett.name, isChecked)}\n                                                            />\n                                                        )\n\n                                                    }[arrProp.type]\n                                                )\n                                            })\n                                        })()\n\n                                    }[prop.type]\n                                )\n                            })}\n                        </Col>\n                        {visibleHelp && <Col lg={8}>\n                            <HelpCard data={data} />\n                        </Col>}\n                    </Form.Row>\n                    <Button id=\"save\" type=\"submit\" variant=\"outline-primary\" size=\"sm\" style={{ float: `right` }}>\n                        Save\n                    </Button>\n                    <Button id=\"cancel\" variant=\"outline-secondary\" size=\"sm\"\n                        onClick={onCancel}\n                        style={{ float: `right`, marginRight: `8px` }}>\n                        Cancel\n                    </Button>\n                </Form>\n            </Card.Body>\n        </Card >\n    )\n}\nLoaderForm.propTypes = {\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onShowHelp: PropTypes.func.isRequired,\n}\n\nexport default LoaderForm;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport * as Blockly from 'blockly/core';\n\nimport BaseField from './BaseField';\n\nimport ModalDialog from '../components/modal';\nimport LoaderForm from '../forms/loader-form';\n\nimport {\n    hydrate,\n    dehydrate,\n    groupTemplatesByParent,\n    platformTemplates,\n} from '../utils';\n\nconst blockTemplates = groupTemplatesByParent(platformTemplates());\n\nconst ModalForm = ({ title, data, onCancel, onSave }) => {\n    const [size, setSize] = useState(\"\");\n\n    const onShowHelp = (visible) => setSize(visible ? \"lg\" : \"\");\n\n    return <ModalDialog title={title} size={size} onCancel={onCancel}>\n        <LoaderForm data={data} onSave={onSave} onCancel={onCancel} onShowHelp={onShowHelp} />\n    </ModalDialog>\n}\nModalForm.propTypes = {\n    title: PropTypes.string.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n}\n\nclass LoaderField extends BaseField {\n\n    static fromJson(options) {\n        return new LoaderField(dehydrate(options['data']));\n    }\n\n    SERIALIZABLE = true;\n\n    onSave = (values) => {\n        if (Object.keys(values).length) {\n            this.setValue(values);\n        }\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    onCancel = () => {\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    getText_() {\n        const keys = Object.keys(this.value_);\n        return this.value_[keys[0]];\n    };\n\n    fromXml(fieldElement) {\n        const value = dehydrate(fieldElement.textContent);\n        \n        // re-assign available block templates as options for the select in case they are updated\n        value.properties\n            .find(p => p.name === \"template\")\n            .options = blockTemplates\n                .find(bt => bt.blockName === \"custom_loader_field\")\n                .templates\n                .filter(t => t.platform === this.getPlatform());\n        \n        this.setValue(value);\n    }\n\n    toXml(fieldElement) {\n        fieldElement.textContent = hydrate(this.value_);\n        return fieldElement;\n    }\n\n    render() {\n        return <ModalForm\n            title=\"Loader Settings\"\n            data={this.value_}\n            onCancel={this.onCancel}\n            onSave={this.onSave}\n        />\n    }\n}\n\nBlockly.fieldRegistry.register('loader_field', LoaderField);\n\nexport default LoaderField;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Card from \"react-bootstrap/Card\";\nimport Col from \"react-bootstrap/Col\";\n\nimport { faInfoCircle, faChevronCircleLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport Icon from '../components/icon';\nimport NumberField from './fields/number-field';\nimport SelectField from './fields/select-field';\nimport InputField from './fields/input-field';\nimport BooleanField from './fields/boolean-field';\nimport HelpCard from '../components/help-card';\n\nconst MemoryForm = (props) => {\n    const { onSave, onCancel, onShowHelp } = props;\n    const [validated, setValidated] = useState(false);\n    const [data, setData] = useState(props.data);\n    const [visibleHelp, setVisibleHelp] = useState(false);\n\n    const updateSettings = (changedData, value) => {\n        const props = changedData.properties\n            .find(dp => dp.name === \"settings\")\n            .itemProperties\n            .find(ip => ip.name === value);\n\n        if (!props) changedData.settings = [];\n        else changedData.settings = props.properties.map(p => ({ name: p.name, value: p.default }));\n        setData({ ...changedData });\n    }\n\n    const handleSubmit = (event) => {\n        const form = event.currentTarget;\n\n        if (form.checkValidity() === false) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n        setValidated(true);\n\n        onSave({ ...data });\n    }\n\n    const handleSettings = (name, value) => {\n        const tmpSetts = [...data.settings];\n        tmpSetts.splice(tmpSetts.indexOf(data.settings.find(s => s.name === name)), 1, { name, value });\n        data.settings = [...tmpSetts];\n        setData({ ...data });\n    }\n\n    return (\n        <Card bg=\"light\" text=\"dark\" style={{ fontSize: `0.75rem`, border: `0 solid #ccc` }}>\n            <Card.Header style={{ padding: `0.25rem` }}>\n                <Button as=\"div\" size=\"sm\"\n                    onClick={e => {\n                        setVisibleHelp(!visibleHelp);\n                        onShowHelp(!visibleHelp);\n                    }}\n                    style={{\n                        backgroundColor: `Transparent`,\n                        color: `#343a40`,\n                        border: `0 solid white`,\n                        width: `auto`,\n                        height: `auto`,\n                        marginLeft: `0.5rem`\n                    }}>\n                    <Icon icon={visibleHelp ? faChevronCircleLeft : faInfoCircle} size=\"1x\" />\n                    <small title=\"Click to expand or collapse\">Help</small>\n                </Button>\n            </Card.Header>\n            <Card.Body>\n                <Form id=\"frmMemory\" noValidate validated={validated} onSubmit={handleSubmit}>\n                    <Form.Row className=\"mb-2\">\n                        <Col>\n                            {data.properties.map((prop, index) => {\n                                return (\n                                    {\n                                        select: (\n                                            <SelectField key={`prop${prop.name}${index}`}\n                                                prop={prop}\n                                                index={index}\n                                                data={data}\n                                                onValueChange={(changedData, updatedValue) => {\n                                                    if (!!prop.refProperty) updateSettings(changedData, updatedValue);\n                                                }}\n                                            />\n                                        ),\n\n                                        array: (() => {\n                                            if (prop.type !== 'array') return null;\n\n                                            return data.settings.map((sett, j) => {\n                                                const arrProps = prop.itemProperties\n                                                    .find(ip => ip.name === data[prop.refProperty]);\n\n                                                if (!arrProps) return null;\n                                                const arrProp = arrProps.properties.find(ap => ap.name === sett.name);\n\n                                                return (\n                                                    {\n                                                        number: (\n                                                            <NumberField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        input: (\n                                                            <InputField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        checkbox: (\n                                                            <BooleanField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                onValueChange={(changedData, isChecked) => handleSettings(sett.name, isChecked)}\n                                                            />\n                                                        )\n\n                                                    }[arrProp.type]\n                                                )\n                                            })\n                                        })()\n\n                                    }[prop.type]\n                                )\n                            })}\n                        </Col>\n                        {visibleHelp && <Col lg={8}>\n                            <HelpCard data={data} />\n                        </Col>}\n                    </Form.Row>\n                    <Button id=\"save\" type=\"submit\" variant=\"outline-primary\" size=\"sm\" style={{ float: `right` }}>\n                        Save\n                    </Button>\n                    <Button id=\"cancel\" variant=\"outline-secondary\" size=\"sm\"\n                        onClick={onCancel}\n                        style={{ float: `right`, marginRight: `8px` }}>\n                        Cancel\n                    </Button>\n                </Form>\n            </Card.Body>\n        </Card >\n    )\n}\nMemoryForm.propTypes = {\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onShowHelp: PropTypes.func.isRequired,\n}\n\nexport default MemoryForm;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport * as Blockly from 'blockly/core';\n\nimport BaseField from './BaseField';\n\nimport ModalDialog from '../components/modal';\nimport MemoryForm from '../forms/memory-form';\n\nimport {\n    hydrate,\n    dehydrate,\n    groupTemplatesByParent,\n    platformTemplates,\n} from '../utils';\n\nconst blockTemplates = groupTemplatesByParent(platformTemplates());\n\nconst ModalForm = ({ title, data, onCancel, onSave }) => {\n    const [size, setSize] = useState(\"\");\n\n    const onShowHelp = (visible) => setSize(visible ? \"lg\" : \"\");\n\n    return <ModalDialog title={title} size={size} onCancel={onCancel}>\n        <MemoryForm data={data} onSave={onSave} onCancel={onCancel} onShowHelp={onShowHelp} />\n    </ModalDialog>\n}\nModalForm.propTypes = {\n    title: PropTypes.string.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n}\n\nclass MemoryField extends BaseField {\n\n    static fromJson(options) {\n        return new MemoryField(dehydrate(options['data']));\n    }\n\n    SERIALIZABLE = true;\n\n    onSave = (values) => {\n        if (Object.keys(values).length) {\n            this.setValue(values);\n        }\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    onCancel = () => {\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    getText_() {\n        const keys = Object.keys(this.value_);\n        return this.value_[keys[0]];\n    };\n\n    fromXml(fieldElement) {\n        const value = dehydrate(fieldElement.textContent);\n        \n        // re-assign available block templates as options for the select in case they are updated\n        value.properties\n            .find(p => p.name === \"template\")\n            .options = blockTemplates\n                .find(bt => bt.blockName === \"custom_memory_field\")\n                .templates\n                .filter(t => t.platform === this.getPlatform());\n        \n        this.setValue(value);\n    }\n\n    toXml(fieldElement) {\n        fieldElement.textContent = hydrate(this.value_);\n        return fieldElement;\n    }\n\n    render() {\n        return <ModalForm\n            title=\"Memory Settings\"\n            data={this.value_}\n            onCancel={this.onCancel}\n            onSave={this.onSave}\n        />\n    }\n}\n\nBlockly.fieldRegistry.register('memory_field', MemoryField);\n\nexport default MemoryField;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Card from \"react-bootstrap/Card\";\nimport Col from \"react-bootstrap/Col\";\n\nimport { faInfoCircle, faChevronCircleLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport Icon from '../components/icon';\nimport NumberField from './fields/number-field';\nimport SelectField from './fields/select-field';\nimport InputField from './fields/input-field';\nimport BooleanField from './fields/boolean-field';\nimport HelpCard from '../components/help-card';\n\nconst RetrieverForm = (props) => {\n    const { onSave, onCancel, onShowHelp } = props;\n    const [validated, setValidated] = useState(false);\n    const [data, setData] = useState(props.data);\n    const [visibleHelp, setVisibleHelp] = useState(false);\n\n    const updateSettings = (changedData, value) => {\n        const props = changedData.properties\n            .find(dp => dp.name === \"settings\")\n            .itemProperties\n            .find(ip => ip.name === value);\n\n        if (!props) changedData.settings = [];\n        else changedData.settings = props.properties.map(p => ({ name: p.name, value: p.default }));\n        setData({ ...changedData });\n    }\n\n    const handleSubmit = (event) => {\n        const form = event.currentTarget;\n\n        if (form.checkValidity() === false) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n        setValidated(true);\n\n        onSave({ ...data });\n    }\n\n    const handleSettings = (name, value) => {\n        const tmpSetts = [...data.settings];\n        tmpSetts.splice(tmpSetts.indexOf(data.settings.find(s => s.name === name)), 1, { name, value });\n        data.settings = [...tmpSetts];\n        setData({ ...data });\n    }\n\n    return (\n        <Card bg=\"light\" text=\"dark\" style={{ fontSize: `0.75rem`, border: `0 solid #ccc` }}>\n            <Card.Header style={{ padding: `0.25rem` }}>\n                <Button as=\"div\" size=\"sm\"\n                    onClick={e => {\n                        setVisibleHelp(!visibleHelp);\n                        onShowHelp(!visibleHelp);\n                    }}\n                    style={{\n                        backgroundColor: `Transparent`,\n                        color: `#343a40`,\n                        border: `0 solid white`,\n                        width: `auto`,\n                        height: `auto`,\n                        marginLeft: `0.5rem`\n                    }}>\n                    <Icon icon={visibleHelp ? faChevronCircleLeft : faInfoCircle} size=\"1x\" />\n                    <small title=\"Click to expand or collapse\">Help</small>\n                </Button>\n            </Card.Header>\n            <Card.Body>\n                <Form id=\"frmRetriever\" noValidate validated={validated} onSubmit={handleSubmit}>\n                    <Form.Row className=\"mb-2\">\n                        <Col>\n                            {data.properties.map((prop, index) => {\n                                return (\n                                    {\n                                        select: (\n                                            <SelectField key={`prop${prop.name}${index}`}\n                                                prop={prop}\n                                                index={index}\n                                                data={data}\n                                                onValueChange={(changedData, updatedValue) => {\n                                                    if (!!prop.refProperty) updateSettings(changedData, updatedValue);\n                                                }}\n                                            />\n                                        ),\n\n                                        array: (() => {\n                                            if (prop.type !== 'array') return null;\n\n                                            return data.settings.map((sett, j) => {\n                                                const arrProps = prop.itemProperties\n                                                    .find(ip => ip.name === data[prop.refProperty]);\n\n                                                if (!arrProps) return null;\n                                                const arrProp = arrProps.properties.find(ap => ap.name === sett.name);\n\n                                                return (\n                                                    {\n                                                        number: (\n                                                            <NumberField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        input: (\n                                                            <InputField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        checkbox: (\n                                                            <BooleanField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                onValueChange={(changedData, isChecked) => handleSettings(sett.name, isChecked)}\n                                                            />\n                                                        )\n\n                                                    }[arrProp.type]\n                                                )\n                                            })\n                                        })()\n\n                                    }[prop.type]\n                                )\n                            })}\n                        </Col>\n                        {visibleHelp && <Col lg={8}>\n                            <HelpCard data={data} />\n                        </Col>}\n                    </Form.Row>\n                    <Button id=\"save\" type=\"submit\" variant=\"outline-primary\" size=\"sm\" style={{ float: `right` }}>\n                        Save\n                    </Button>\n                    <Button id=\"cancel\" variant=\"outline-secondary\" size=\"sm\"\n                        onClick={onCancel}\n                        style={{ float: `right`, marginRight: `8px` }}>\n                        Cancel\n                    </Button>\n                </Form>\n            </Card.Body>\n        </Card >\n    )\n}\nRetrieverForm.propTypes = {\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onShowHelp: PropTypes.func.isRequired,\n}\n\nexport default RetrieverForm;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport * as Blockly from 'blockly/core';\n\nimport BaseField from './BaseField';\n\nimport ModalDialog from '../components/modal';\nimport RetrieverForm from '../forms/retriever-form';\n\nimport {\n    hydrate,\n    dehydrate,\n    groupTemplatesByParent,\n    platformTemplates,\n} from '../utils';\n\nconst blockTemplates = groupTemplatesByParent(platformTemplates());\n\nconst ModalForm = ({ title, data, onCancel, onSave }) => {\n    const [size, setSize] = useState(\"\");\n\n    const onShowHelp = (visible) => setSize(visible ? \"lg\" : \"\");\n\n    return <ModalDialog title={title} size={size} onCancel={onCancel}>\n        <RetrieverForm data={data} onSave={onSave} onCancel={onCancel} onShowHelp={onShowHelp} />\n    </ModalDialog>\n}\nModalForm.propTypes = {\n    title: PropTypes.string.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n}\n\nclass RetrieverField extends BaseField {\n\n    static fromJson(options) {\n        return new RetrieverField(dehydrate(options['data']));\n    }\n\n    SERIALIZABLE = true;\n\n    onSave = (values) => {\n        if (Object.keys(values).length) {\n            this.setValue(values);\n        }\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    onCancel = () => {\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    getText_() {\n        const keys = Object.keys(this.value_);\n        return this.value_[keys[0]];\n    };\n\n    fromXml(fieldElement) {\n        const value = dehydrate(fieldElement.textContent);\n        \n        // re-assign available block templates as options for the select in case they are updated\n        value.properties\n            .find(p => p.name === \"template\")\n            .options = blockTemplates\n                .find(bt => bt.blockName === \"custom_retriever_field\")\n                .templates\n                .filter(t => t.platform === this.getPlatform());\n        \n        this.setValue(value);\n    }\n\n    toXml(fieldElement) {\n        fieldElement.textContent = hydrate(this.value_);\n        return fieldElement;\n    }\n\n    render() {\n        return <ModalForm\n            title=\"Retriever Settings\"\n            data={this.value_}\n            onCancel={this.onCancel}\n            onSave={this.onSave}\n        />\n    }\n}\n\nBlockly.fieldRegistry.register('retriever_field', RetrieverField);\n\nexport default RetrieverField;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Card from \"react-bootstrap/Card\";\nimport Col from \"react-bootstrap/Col\";\n\nimport { faInfoCircle, faChevronCircleLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport Icon from '../components/icon';\nimport NumberField from './fields/number-field';\nimport SelectField from './fields/select-field';\nimport InputField from './fields/input-field';\nimport BooleanField from './fields/boolean-field';\nimport HelpCard from '../components/help-card';\n\nconst SplitterForm = (props) => {\n    const { onSave, onCancel, onShowHelp } = props;\n    const [validated, setValidated] = useState(false);\n    const [data, setData] = useState(props.data);\n    const [visibleHelp, setVisibleHelp] = useState(false);\n\n    const updateSettings = (changedData, value) => {\n        const props = changedData.properties\n            .find(dp => dp.name === \"settings\")\n            .itemProperties\n            .find(ip => ip.name === value);\n\n        if (!props) changedData.settings = [];\n        else changedData.settings = props.properties.map(p => ({ name: p.name, value: p.default }));\n        setData({ ...changedData });\n    }\n\n    const handleSubmit = (event) => {\n        const form = event.currentTarget;\n\n        if (form.checkValidity() === false) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n        setValidated(true);\n\n        onSave({ ...data });\n    }\n\n    const handleSettings = (name, value) => {\n        const tmpSetts = [...data.settings];\n        tmpSetts.splice(tmpSetts.indexOf(data.settings.find(s => s.name === name)), 1, { name, value });\n        data.settings = [...tmpSetts];\n        setData({ ...data });\n    }\n\n    return (\n        <Card bg=\"light\" text=\"dark\" style={{ fontSize: `0.75rem`, border: `0 solid #ccc` }}>\n            <Card.Header style={{ padding: `0.25rem` }}>\n                <Button as=\"div\" size=\"sm\"\n                    onClick={e => {\n                        setVisibleHelp(!visibleHelp);\n                        onShowHelp(!visibleHelp);\n                    }}\n                    style={{\n                        backgroundColor: `Transparent`,\n                        color: `#343a40`,\n                        border: `0 solid white`,\n                        width: `auto`,\n                        height: `auto`,\n                        marginLeft: `0.5rem`\n                    }}>\n                    <Icon icon={visibleHelp ? faChevronCircleLeft : faInfoCircle} size=\"1x\" />\n                    <small title=\"Click to expand or collapse\">Help</small>\n                </Button>\n            </Card.Header>\n            <Card.Body>\n                <Form id=\"frmSplitter\" noValidate validated={validated} onSubmit={handleSubmit}>\n                    <Form.Row className=\"mb-2\">\n                        <Col>\n                            {data.properties.map((prop, index) => {\n                                return (\n                                    {\n                                        select: (\n                                            <SelectField key={`prop${prop.name}${index}`}\n                                                prop={prop}\n                                                index={index}\n                                                data={data}\n                                                onValueChange={(changedData, updatedValue) => {\n                                                    if (!!prop.refProperty) updateSettings(changedData, updatedValue);\n                                                }}\n                                            />\n                                        ),\n\n                                        array: (() => {\n                                            if (prop.type !== 'array') return null;\n\n                                            return data.settings.map((sett, j) => {\n                                                const arrProps = prop.itemProperties\n                                                    .find(ip => ip.name === data[prop.refProperty]);\n\n                                                if (!arrProps) return null;\n                                                const arrProp = arrProps.properties.find(ap => ap.name === sett.name);\n\n                                                return (\n                                                    {\n                                                        number: (\n                                                            <NumberField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        input: (\n                                                            <InputField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        checkbox: (\n                                                            <BooleanField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                onValueChange={(changedData, isChecked) => handleSettings(sett.name, isChecked)}\n                                                            />\n                                                        )\n\n                                                    }[arrProp.type]\n                                                )\n                                            })\n                                        })()\n\n                                    }[prop.type]\n                                )\n                            })}\n                        </Col>\n                        {visibleHelp && <Col lg={8}>\n                            <HelpCard data={data} />\n                        </Col>}\n                    </Form.Row>\n                    <Button id=\"save\" type=\"submit\" variant=\"outline-primary\" size=\"sm\" style={{ float: `right` }}>\n                        Save\n                    </Button>\n                    <Button id=\"cancel\" variant=\"outline-secondary\" size=\"sm\"\n                        onClick={onCancel}\n                        style={{ float: `right`, marginRight: `8px` }}>\n                        Cancel\n                    </Button>\n                </Form>\n            </Card.Body>\n        </Card >\n    )\n}\nSplitterForm.propTypes = {\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onShowHelp: PropTypes.func.isRequired,\n}\n\nexport default SplitterForm;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport * as Blockly from 'blockly/core';\n\nimport BaseField from './BaseField';\n\nimport ModalDialog from '../components/modal';\nimport SplitterForm from '../forms/splitter-form';\n\nimport {\n    hydrate,\n    dehydrate,\n    groupTemplatesByParent,\n    platformTemplates,\n} from '../utils';\n\nconst blockTemplates = groupTemplatesByParent(platformTemplates());\n\nconst ModalForm = ({ title, data, onCancel, onSave }) => {\n    const [size, setSize] = useState(\"\");\n\n    const onShowHelp = (visible) => setSize(visible ? \"lg\" : \"\");\n\n    return <ModalDialog title={title} size={size} onCancel={onCancel}>\n        <SplitterForm data={data} onSave={onSave} onCancel={onCancel} onShowHelp={onShowHelp} />\n    </ModalDialog>\n}\nModalForm.propTypes = {\n    title: PropTypes.string.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n}\n\nclass SplitterField extends BaseField {\n\n    static fromJson(options) {\n        return new SplitterField(dehydrate(options['data']));\n    }\n\n    SERIALIZABLE = true;\n\n    onSave = (values) => {\n        if (Object.keys(values).length) {\n            this.setValue(values);\n        }\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    onCancel = () => {\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    getText_() {\n        const keys = Object.keys(this.value_);\n        return this.value_[keys[0]];\n    };\n\n    fromXml(fieldElement) {\n        const value = dehydrate(fieldElement.textContent);\n        \n        // re-assign available block templates as options for the select in case they are updated\n        value.properties\n            .find(p => p.name === \"template\")\n            .options = blockTemplates\n                .find(bt => bt.blockName === \"custom_splitter_field\")\n                .templates\n                .filter(t => t.platform === this.getPlatform());\n        \n        this.setValue(value);\n    }\n\n    toXml(fieldElement) {\n        fieldElement.textContent = hydrate(this.value_);\n        return fieldElement;\n    }\n\n    render() {\n        return <ModalForm\n            title=\"Splitter Settings\"\n            data={this.value_}\n            onCancel={this.onCancel}\n            onSave={this.onSave}\n        />\n    }\n}\n\nBlockly.fieldRegistry.register('splitter_field', SplitterField);\n\nexport default SplitterField;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Card from \"react-bootstrap/Card\";\nimport Col from \"react-bootstrap/Col\";\n\nimport { faInfoCircle, faChevronCircleLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport Icon from '../components/icon';\nimport NumberField from './fields/number-field';\nimport SelectField from './fields/select-field';\nimport InputField from './fields/input-field';\nimport BooleanField from './fields/boolean-field';\nimport HelpCard from '../components/help-card';\n\nconst ToolForm = (props) => {\n    const { onSave, onCancel, onShowHelp } = props;\n    const [validated, setValidated] = useState(false);\n    const [data, setData] = useState(props.data);\n    const [visibleHelp, setVisibleHelp] = useState(false);\n\n    const updateSettings = (changedData, value) => {\n        const props = changedData.properties\n            .find(dp => dp.name === \"settings\")\n            .itemProperties\n            .find(ip => ip.name === value);\n\n        if (!props) changedData.settings = [];\n        else changedData.settings = props.properties.map(p => ({ name: p.name, value: p.default }));\n        setData({ ...changedData });\n    }\n\n    const handleSubmit = (event) => {\n        const form = event.currentTarget;\n\n        if (form.checkValidity() === false) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n        setValidated(true);\n\n        onSave({ ...data });\n    }\n\n    const handleSettings = (name, value) => {\n        const tmpSetts = [...data.settings];\n        tmpSetts.splice(tmpSetts.indexOf(data.settings.find(s => s.name === name)), 1, { name, value });\n        data.settings = [...tmpSetts];\n        setData({ ...data });\n    }\n\n    return (\n        <Card bg=\"light\" text=\"dark\" style={{ fontSize: `0.75rem`, border: `0 solid #ccc` }}>\n            <Card.Header style={{ padding: `0.25rem` }}>\n                <Button as=\"div\" size=\"sm\"\n                    onClick={e => {\n                        setVisibleHelp(!visibleHelp);\n                        onShowHelp(!visibleHelp);\n                    }}\n                    style={{\n                        backgroundColor: `Transparent`,\n                        color: `#343a40`,\n                        border: `0 solid white`,\n                        width: `auto`,\n                        height: `auto`,\n                        marginLeft: `0.5rem`\n                    }}>\n                    <Icon icon={visibleHelp ? faChevronCircleLeft : faInfoCircle} size=\"1x\" />\n                    <small title=\"Click to expand or collapse\">Help</small>\n                </Button>\n            </Card.Header>\n            <Card.Body>\n                <Form id=\"frmTool\" noValidate validated={validated} onSubmit={handleSubmit}>\n                    <Form.Row className=\"mb-2\">\n                        <Col>\n                            {data.properties.map((prop, index) => {\n                                return (\n                                    {\n                                        select: (\n                                            <SelectField key={`prop${prop.name}${index}`}\n                                                prop={prop}\n                                                index={index}\n                                                data={data}\n                                                onValueChange={(changedData, updatedValue) => {\n                                                    if (!!prop.refProperty) updateSettings(changedData, updatedValue);\n                                                }}\n                                            />\n                                        ),\n\n                                        array: (() => {\n                                            if (prop.type !== 'array') return null;\n\n                                            return data.settings.map((sett, j) => {\n                                                const arrProps = prop.itemProperties\n                                                    .find(ip => ip.name === data[prop.refProperty]);\n\n                                                if (!arrProps) return null;\n                                                const arrProp = arrProps.properties.find(ap => ap.name === sett.name);\n\n                                                return (\n                                                    {\n                                                        number: (\n                                                            <NumberField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        input: (\n                                                            <InputField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        checkbox: (\n                                                            <BooleanField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                onValueChange={(changedData, isChecked) => handleSettings(sett.name, isChecked)}\n                                                            />\n                                                        )\n\n                                                    }[arrProp.type]\n                                                )\n                                            })\n                                        })()\n\n                                    }[prop.type]\n                                )\n                            })}\n                        </Col>\n                        {visibleHelp && <Col lg={8}>\n                            <HelpCard data={data} />\n                        </Col>}\n                    </Form.Row>\n                    <Button id=\"save\" type=\"submit\" variant=\"outline-primary\" size=\"sm\" style={{ float: `right` }}>\n                        Save\n                    </Button>\n                    <Button id=\"cancel\" variant=\"outline-secondary\" size=\"sm\"\n                        onClick={onCancel}\n                        style={{ float: `right`, marginRight: `8px` }}>\n                        Cancel\n                    </Button>\n                </Form>\n            </Card.Body>\n        </Card >\n    )\n}\nToolForm.propTypes = {\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onShowHelp: PropTypes.func.isRequired,\n}\n\nexport default ToolForm;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport * as Blockly from 'blockly/core';\n\nimport BaseField from './BaseField';\n\nimport ModalDialog from '../components/modal';\nimport ToolForm from '../forms/tool-form';\n\nimport {\n    hydrate,\n    dehydrate,\n    groupTemplatesByParent,\n    platformTemplates,\n} from '../utils';\n\nconst blockTemplates = groupTemplatesByParent(platformTemplates());\n\nconst ModalForm = ({ title, data, onCancel, onSave }) => {\n    const [size, setSize] = useState(\"\");\n\n    const onShowHelp = (visible) => setSize(visible ? \"lg\" : \"\");\n\n    return <ModalDialog title={title} size={size} onCancel={onCancel}>\n        <ToolForm data={data} onSave={onSave} onCancel={onCancel} onShowHelp={onShowHelp} />\n    </ModalDialog>\n}\nModalForm.propTypes = {\n    title: PropTypes.string.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n}\n\nclass ToolField extends BaseField {\n\n    static fromJson(options) {\n        return new ToolField(dehydrate(options['data']));\n    }\n\n    SERIALIZABLE = true;\n\n    onSave = (values) => {\n        if (Object.keys(values).length) {\n            this.setValue(values);\n        }\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    onCancel = () => {\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    getText_() {\n        const keys = Object.keys(this.value_);\n        return this.value_[keys[0]];\n    };\n\n    fromXml(fieldElement) {\n        const value = dehydrate(fieldElement.textContent);\n        \n        // re-assign available block templates as options for the select in case they are updated\n        value.properties\n            .find(p => p.name === \"template\")\n            .options = blockTemplates\n                .find(bt => bt.blockName === \"custom_tool_field\")\n                .templates\n                .filter(t => t.platform === this.getPlatform());\n        \n        this.setValue(value);\n    }\n\n    toXml(fieldElement) {\n        fieldElement.textContent = hydrate(this.value_);\n        return fieldElement;\n    }\n\n    render() {\n        return <ModalForm\n            title=\"Tool Settings\"\n            data={this.value_}\n            onCancel={this.onCancel}\n            onSave={this.onSave}\n        />\n    }\n}\n\nBlockly.fieldRegistry.register('tool_field', ToolField);\n\nexport default ToolField;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Card from \"react-bootstrap/Card\";\nimport Col from \"react-bootstrap/Col\";\n\nimport { faInfoCircle, faChevronCircleLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport Icon from '../components/icon';\nimport NumberField from './fields/number-field';\nimport SelectField from './fields/select-field';\nimport InputField from './fields/input-field';\nimport BooleanField from './fields/boolean-field';\nimport HelpCard from '../components/help-card';\n\nconst UtilForm = (props) => {\n    const { onSave, onCancel, onShowHelp } = props;\n    const [validated, setValidated] = useState(false);\n    const [data, setData] = useState(props.data);\n    const [visibleHelp, setVisibleHelp] = useState(false);\n\n    const updateSettings = (changedData, value) => {\n        const props = changedData.properties\n            .find(dp => dp.name === \"settings\")\n            .itemProperties\n            .find(ip => ip.name === value);\n\n        if (!props) changedData.settings = [];\n        else changedData.settings = props.properties.map(p => ({ name: p.name, value: p.default }));\n        setData({ ...changedData });\n    }\n\n    const handleSubmit = (event) => {\n        const form = event.currentTarget;\n\n        if (form.checkValidity() === false) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n        setValidated(true);\n\n        onSave({ ...data });\n    }\n\n    const handleSettings = (name, value) => {\n        const tmpSetts = [...data.settings];\n        tmpSetts.splice(tmpSetts.indexOf(data.settings.find(s => s.name === name)), 1, { name, value });\n        data.settings = [...tmpSetts];\n        setData({ ...data });\n    }\n\n    return (\n        <Card bg=\"light\" text=\"dark\" style={{ fontSize: `0.75rem`, border: `0 solid #ccc` }}>\n            <Card.Header style={{ padding: `0.25rem` }}>\n                <Button as=\"div\" size=\"sm\"\n                    onClick={e => {\n                        setVisibleHelp(!visibleHelp);\n                        onShowHelp(!visibleHelp);\n                    }}\n                    style={{\n                        backgroundColor: `Transparent`,\n                        color: `#343a40`,\n                        border: `0 solid white`,\n                        width: `auto`,\n                        height: `auto`,\n                        marginLeft: `0.5rem`\n                    }}>\n                    <Icon icon={visibleHelp ? faChevronCircleLeft : faInfoCircle} size=\"1x\" />\n                    <small title=\"Click to expand or collapse\">Help</small>\n                </Button>\n            </Card.Header>\n            <Card.Body>\n                <Form id=\"frmUtil\" noValidate validated={validated} onSubmit={handleSubmit}>\n                    <Form.Row className=\"mb-2\">\n                        <Col>\n                            {data.properties.map((prop, index) => {\n                                return (\n                                    {\n                                        select: (\n                                            <SelectField key={`prop${prop.name}${index}`}\n                                                prop={prop}\n                                                index={index}\n                                                data={data}\n                                                onValueChange={(changedData, updatedValue) => {\n                                                    if (!!prop.refProperty) updateSettings(changedData, updatedValue);\n                                                }}\n                                            />\n                                        ),\n\n                                        array: (() => {\n                                            if (prop.type !== 'array') return null;\n\n                                            return data.settings.map((sett, j) => {\n                                                const arrProps = prop.itemProperties\n                                                    .find(ip => ip.name === data[prop.refProperty]);\n\n                                                if (!arrProps) return null;\n                                                const arrProp = arrProps.properties.find(ap => ap.name === sett.name);\n\n                                                return (\n                                                    {\n                                                        number: (\n                                                            <NumberField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        input: (\n                                                            <InputField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        checkbox: (\n                                                            <BooleanField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                onValueChange={(changedData, isChecked) => handleSettings(sett.name, isChecked)}\n                                                            />\n                                                        )\n\n                                                    }[arrProp.type]\n                                                )\n                                            })\n                                        })()\n\n                                    }[prop.type]\n                                )\n                            })}\n                        </Col>\n                        {visibleHelp && <Col lg={8}>\n                            <HelpCard data={data} />\n                        </Col>}\n                    </Form.Row>\n                    <Button id=\"save\" type=\"submit\" variant=\"outline-primary\" size=\"sm\" style={{ float: `right` }}>\n                        Save\n                    </Button>\n                    <Button id=\"cancel\" variant=\"outline-secondary\" size=\"sm\"\n                        onClick={onCancel}\n                        style={{ float: `right`, marginRight: `8px` }}>\n                        Cancel\n                    </Button>\n                </Form>\n            </Card.Body>\n        </Card >\n    )\n}\nUtilForm.propTypes = {\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onShowHelp: PropTypes.func.isRequired,\n}\n\nexport default UtilForm;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport * as Blockly from 'blockly/core';\n\nimport BaseField from './BaseField';\n\nimport ModalDialog from '../components/modal';\nimport UtilForm from '../forms/util-form';\n\nimport {\n    hydrate,\n    dehydrate,\n    groupTemplatesByParent,\n    platformTemplates,\n} from '../utils';\n\nconst blockTemplates = groupTemplatesByParent(platformTemplates());\n\nconst ModalForm = ({ title, data, onCancel, onSave }) => {\n    const [size, setSize] = useState(\"\");\n\n    const onShowHelp = (visible) => setSize(visible ? \"lg\" : \"\");\n\n    return <ModalDialog title={title} size={size} onCancel={onCancel}>\n        <UtilForm data={data} onSave={onSave} onCancel={onCancel} onShowHelp={onShowHelp} />\n    </ModalDialog>\n}\nModalForm.propTypes = {\n    title: PropTypes.string.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n}\n\nclass UtilField extends BaseField {\n\n    static fromJson(options) {\n        return new UtilField(dehydrate(options['data']));\n    }\n\n    SERIALIZABLE = true;\n\n    onSave = (values) => {\n        if (Object.keys(values).length) {\n            this.setValue(values);\n        }\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    onCancel = () => {\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    getText_() {\n        const keys = Object.keys(this.value_);\n        return this.value_[keys[0]];\n    };\n\n    fromXml(fieldElement) {\n        const value = dehydrate(fieldElement.textContent);\n        \n        // re-assign available block templates as options for the select in case they are updated\n        value.properties\n            .find(p => p.name === \"template\")\n            .options = blockTemplates\n                .find(bt => bt.blockName === \"custom_util_field\")\n                .templates\n                .filter(t => t.platform === this.getPlatform());\n        \n        this.setValue(value);\n    }\n\n    toXml(fieldElement) {\n        fieldElement.textContent = hydrate(this.value_);\n        return fieldElement;\n    }\n\n    render() {\n        return <ModalForm\n            title=\"Util Settings\"\n            data={this.value_}\n            onCancel={this.onCancel}\n            onSave={this.onSave}\n        />\n    }\n}\n\nBlockly.fieldRegistry.register('util_field', UtilField);\n\nexport default UtilField;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Card from \"react-bootstrap/Card\";\nimport Col from \"react-bootstrap/Col\";\n\nimport { faInfoCircle, faChevronCircleLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport Icon from '../components/icon';\nimport NumberField from './fields/number-field';\nimport SelectField from './fields/select-field';\nimport InputField from './fields/input-field';\nimport BooleanField from './fields/boolean-field';\nimport HelpCard from '../components/help-card';\n\nconst VectorStoreForm = (props) => {\n    const { onSave, onCancel, onShowHelp } = props;\n    const [validated, setValidated] = useState(false);\n    const [data, setData] = useState(props.data);\n    const [visibleHelp, setVisibleHelp] = useState(false);\n\n    const updateSettings = (changedData, value) => {\n        const props = changedData.properties\n            .find(dp => dp.name === \"settings\")\n            .itemProperties\n            .find(ip => ip.name === value);\n\n        if (!props) changedData.settings = [];\n        else changedData.settings = props.properties.map(p => ({ name: p.name, value: p.default }));\n        setData({ ...changedData });\n    }\n\n    const handleSubmit = (event) => {\n        const form = event.currentTarget;\n\n        if (form.checkValidity() === false) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n        setValidated(true);\n\n        onSave({ ...data });\n    }\n\n    const handleSettings = (name, value) => {\n        const tmpSetts = [...data.settings];\n        tmpSetts.splice(tmpSetts.indexOf(data.settings.find(s => s.name === name)), 1, { name, value });\n        data.settings = [...tmpSetts];\n        setData({ ...data });\n    }\n\n    return (\n        <Card bg=\"light\" text=\"dark\" style={{ fontSize: `0.75rem`, border: `0 solid #ccc` }}>\n            <Card.Header style={{ padding: `0.25rem` }}>\n                <Button as=\"div\" size=\"sm\"\n                    onClick={e => {\n                        setVisibleHelp(!visibleHelp);\n                        onShowHelp(!visibleHelp);\n                    }}\n                    style={{\n                        backgroundColor: `Transparent`,\n                        color: `#343a40`,\n                        border: `0 solid white`,\n                        width: `auto`,\n                        height: `auto`,\n                        marginLeft: `0.5rem`\n                    }}>\n                    <Icon icon={visibleHelp ? faChevronCircleLeft : faInfoCircle} size=\"1x\" />\n                    <small title=\"Click to expand or collapse\">Help</small>\n                </Button>\n            </Card.Header>\n            <Card.Body>\n                <Form id=\"frmVectorStore\" noValidate validated={validated} onSubmit={handleSubmit}>\n                    <Form.Row className=\"mb-2\">\n                        <Col>\n                            {data.properties.map((prop, index) => {\n                                return (\n                                    {\n                                        select: (\n                                            <SelectField key={`prop${prop.name}${index}`}\n                                                prop={prop}\n                                                index={index}\n                                                data={data}\n                                                onValueChange={(changedData, updatedValue) => {\n                                                    if (!!prop.refProperty) updateSettings(changedData, updatedValue);\n                                                }}\n                                            />\n                                        ),\n\n                                        array: (() => {\n                                            if (prop.type !== 'array') return null;\n\n                                            return data.settings.map((sett, j) => {\n                                                const arrProps = prop.itemProperties\n                                                    .find(ip => ip.name === data[prop.refProperty]);\n\n                                                if (!arrProps) return null;\n                                                const arrProp = arrProps.properties.find(ap => ap.name === sett.name);\n\n                                                return (\n                                                    {\n                                                        number: (\n                                                            <NumberField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        input: (\n                                                            <InputField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        checkbox: (\n                                                            <BooleanField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                onValueChange={(changedData, isChecked) => handleSettings(sett.name, isChecked)}\n                                                            />\n                                                        )\n\n                                                    }[arrProp.type]\n                                                )\n                                            })\n                                        })()\n\n                                    }[prop.type]\n                                )\n                            })}\n                        </Col>\n                        {visibleHelp && <Col lg={8}>\n                            <HelpCard data={data} />\n                        </Col>}\n                    </Form.Row>\n                    <Button id=\"save\" type=\"submit\" variant=\"outline-primary\" size=\"sm\" style={{ float: `right` }}>\n                        Save\n                    </Button>\n                    <Button id=\"cancel\" variant=\"outline-secondary\" size=\"sm\"\n                        onClick={onCancel}\n                        style={{ float: `right`, marginRight: `8px` }}>\n                        Cancel\n                    </Button>\n                </Form>\n            </Card.Body>\n        </Card >\n    )\n}\nVectorStoreForm.propTypes = {\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onShowHelp: PropTypes.func.isRequired,\n}\n\nexport default VectorStoreForm;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport * as Blockly from 'blockly/core';\n\nimport BaseField from './BaseField';\n\nimport ModalDialog from '../components/modal';\nimport VectorStoreForm from '../forms/vectorstore-form';\n\nimport {\n    hydrate,\n    dehydrate,\n    groupTemplatesByParent,\n    platformTemplates,\n} from '../utils';\n\nconst blockTemplates = groupTemplatesByParent(platformTemplates());\n\nconst ModalForm = ({ title, data, onCancel, onSave }) => {\n    const [size, setSize] = useState(\"\");\n\n    const onShowHelp = (visible) => setSize(visible ? \"lg\" : \"\");\n\n    return <ModalDialog title={title} size={size} onCancel={onCancel}>\n        <VectorStoreForm data={data} onSave={onSave} onCancel={onCancel} onShowHelp={onShowHelp} />\n    </ModalDialog>\n}\nModalForm.propTypes = {\n    title: PropTypes.string.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n}\n\nclass VectorStoreField extends BaseField {\n\n    static fromJson(options) {\n        return new VectorStoreField(dehydrate(options['data']));\n    }\n\n    SERIALIZABLE = true;\n\n    onSave = (values) => {\n        if (Object.keys(values).length) {\n            this.setValue(values);\n        }\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    onCancel = () => {\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    getText_() {\n        const keys = Object.keys(this.value_);\n        return this.value_[keys[0]];\n    };\n\n    fromXml(fieldElement) {\n        const value = dehydrate(fieldElement.textContent);\n        \n        // re-assign available block templates as options for the select in case they are updated\n        value.properties\n            .find(p => p.name === \"template\")\n            .options = blockTemplates\n                .find(bt => bt.blockName === \"custom_vectorstore_field\")\n                .templates\n                .filter(t => t.platform === this.getPlatform());\n        \n        this.setValue(value);\n    }\n\n    toXml(fieldElement) {\n        fieldElement.textContent = hydrate(this.value_);\n        return fieldElement;\n    }\n\n    render() {\n        return <ModalForm\n            title=\"VectorStore Settings\"\n            data={this.value_}\n            onCancel={this.onCancel}\n            onSave={this.onSave}\n        />\n    }\n}\n\nBlockly.fieldRegistry.register('vectorstore_field', VectorStoreField);\n\nexport default VectorStoreField;\n","import React from 'react'\nimport PropTypes from 'prop-types';\n\nimport Form from \"react-bootstrap/Form\";\nimport { labelize } from '../../utils';\n\nconst TextAreaField = ({ prop, index, data, isNameValue = false, onValueChange }) => {\n    if (prop.type !== 'textarea') return null;\n\n    return (\n        <Form.Group>\n            <Form.Label>{labelize(prop.name.toLowerCase())}</Form.Label>\n            <Form.Control as='textarea' id={prop.name}\n                type={prop.type}\n                min={prop.min}\n                max={prop.max}\n                step={prop.step}\n                rows={5}\n                defaultValue={isNameValue ? data.value : data[prop.name]}\n                onChange={e => {\n                    if (!isNameValue) data[prop.name] = e.target.value;\n                    onValueChange({ ...data }, e.target.value);\n                }}\n                size=\"sm\"\n                required={prop.required} />\n        </Form.Group>\n    )\n}\nTextAreaField.propTypes = {\n    prop: PropTypes.object.isRequired,\n    index: PropTypes.number.isRequired,\n    data: PropTypes.object.isRequired,\n    isNameValue: PropTypes.bool,\n    onValueChange: PropTypes.func.isRequired,\n}\n\nexport default TextAreaField;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Card from \"react-bootstrap/Card\";\nimport Col from \"react-bootstrap/Col\";\n\nimport { faInfoCircle, faChevronCircleLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport Icon from '../components/icon';\nimport NumberField from './fields/number-field';\nimport SelectField from './fields/select-field';\nimport InputField from './fields/input-field';\nimport TextAreaField from './fields/textarea-field';\nimport BooleanField from './fields/boolean-field';\nimport HelpCard from '../components/help-card';\n\nconst PromptForm = (props) => {\n    const { onSave, onCancel, onShowHelp } = props;\n    const [validated, setValidated] = useState(false);\n    const [data, setData] = useState(props.data);\n    const [visibleHelp, setVisibleHelp] = useState(false);\n\n    const updateSettings = (changedData, value) => {\n        const props = changedData.properties\n            .find(dp => dp.name === \"settings\")\n            .itemProperties\n            .find(ip => ip.name === value);\n\n        if (!props) changedData.settings = [];\n        else changedData.settings = props.properties.map(p => ({ name: p.name, value: p.default }));\n        setData({ ...changedData });\n    }\n\n    const handleSubmit = (event) => {\n        const form = event.currentTarget;\n\n        if (form.checkValidity() === false) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n        setValidated(true);\n\n        onSave({ ...data });\n    }\n\n    const handleSettings = (name, value) => {\n        const tmpSetts = [...data.settings];\n        tmpSetts.splice(tmpSetts.indexOf(data.settings.find(s => s.name === name)), 1, { name, value });\n        data.settings = [...tmpSetts];\n        setData({ ...data });\n    }\n\n    return (\n        <Card bg=\"light\" text=\"dark\" style={{ fontSize: `0.75rem`, border: `0 solid #ccc` }}>\n            <Card.Header style={{ padding: `0.25rem` }}>\n                <Button as=\"div\" size=\"sm\"\n                    onClick={e => {\n                        setVisibleHelp(!visibleHelp);\n                        onShowHelp(!visibleHelp);\n                    }}\n                    style={{\n                        backgroundColor: `Transparent`,\n                        color: `#343a40`,\n                        border: `0 solid white`,\n                        width: `auto`,\n                        height: `auto`,\n                        marginLeft: `0.5rem`\n                    }}>\n                    <Icon icon={visibleHelp ? faChevronCircleLeft : faInfoCircle} size=\"1x\" />\n                    <small title=\"Click to expand or collapse\">Help</small>\n                </Button>\n            </Card.Header>\n            <Card.Body>\n                <Form id=\"frmPrompt\" noValidate validated={validated} onSubmit={handleSubmit}>\n                    <Form.Row className=\"mb-2\">\n                        <Col>\n                            {data.properties.map((prop, index) => {\n                                return (\n                                    {\n                                        select: (\n                                            <SelectField key={`prop${prop.name}${index}`}\n                                                prop={prop}\n                                                index={index}\n                                                data={data}\n                                                onValueChange={(changedData, updatedValue) => {\n                                                    if (!!prop.refProperty) updateSettings(changedData, updatedValue);\n                                                }}\n                                            />\n                                        ),\n\n                                        array: (() => {\n                                            if (prop.type !== 'array') return null;\n\n                                            return data.settings.map((sett, j) => {\n                                                const arrProps = prop.itemProperties\n                                                    .find(ip => ip.name === data[prop.refProperty]);\n\n                                                if (!arrProps) return null;\n                                                const arrProp = arrProps.properties.find(ap => ap.name === sett.name);\n                                                console.log('ARRPROP: ', arrProp)\n\n                                                return (\n                                                    {\n                                                        number: (\n                                                            <NumberField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        input: (\n                                                            <InputField key={`prop${sett.name}${j}`}\n                                                                prop={{...arrProp, type: 'textarea'}}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n                                                        \n                                                        textarea: (\n                                                            <TextAreaField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                isNameValue={true}\n                                                                onValueChange={(changedData, updatedValue) => handleSettings(sett.name, updatedValue)}\n                                                            />\n                                                        ),\n\n                                                        checkbox: (\n                                                            <BooleanField key={`prop${sett.name}${j}`}\n                                                                prop={arrProp}\n                                                                index={j}\n                                                                data={sett}\n                                                                onValueChange={(changedData, isChecked) => handleSettings(sett.name, isChecked)}\n                                                            />\n                                                        )\n\n                                                    }[arrProp.type]\n                                                )\n                                            })\n                                        })()\n\n                                    }[prop.type]\n                                )\n                            })}\n                        </Col>\n                        {visibleHelp && <Col lg={8}>\n                            <HelpCard data={data} />\n                        </Col>}\n                    </Form.Row>\n                    <Button id=\"save\" type=\"submit\" variant=\"outline-primary\" size=\"sm\" style={{ float: `right` }}>\n                        Save\n                    </Button>\n                    <Button id=\"cancel\" variant=\"outline-secondary\" size=\"sm\"\n                        onClick={onCancel}\n                        style={{ float: `right`, marginRight: `8px` }}>\n                        Cancel\n                    </Button>\n                </Form>\n            </Card.Body>\n        </Card >\n    )\n}\nPromptForm.propTypes = {\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onShowHelp: PropTypes.func.isRequired,\n}\n\nexport default PromptForm;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport * as Blockly from 'blockly/core';\n\nimport BaseField from './BaseField';\n\nimport ModalDialog from '../components/modal';\nimport PromptForm from '../forms/prompt-form';\n\nimport {\n    hydrate,\n    dehydrate,\n    groupTemplatesByParent,\n    platformTemplates,\n} from '../utils';\n\nconst blockTemplates = groupTemplatesByParent(platformTemplates());\n\nconst ModalForm = ({ title, data, onCancel, onSave }) => {\n    const [size, setSize] = useState(\"\");\n\n    const onShowHelp = (visible) => setSize(visible ? \"lg\" : \"\");\n\n    return <ModalDialog title={title} size={size} onCancel={onCancel}>\n        <PromptForm data={data} onSave={onSave} onCancel={onCancel} onShowHelp={onShowHelp} />\n    </ModalDialog>\n}\nModalForm.propTypes = {\n    title: PropTypes.string.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    data: PropTypes.object.isRequired,\n    onSave: PropTypes.func.isRequired,\n}\n\nclass PromptField extends BaseField {\n\n    static fromJson(options) {\n        return new PromptField(dehydrate(options['data']));\n    }\n\n    SERIALIZABLE = true;\n\n    onSave = (values) => {\n        if (Object.keys(values).length) {\n            this.setValue(values);\n        }\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    onCancel = () => {\n        Blockly.DropDownDiv.hideIfOwner(this, true);\n    }\n\n    getText_() {\n        const keys = Object.keys(this.value_);\n        return this.value_[keys[0]];\n    };\n\n    fromXml(fieldElement) {\n        const value = dehydrate(fieldElement.textContent);\n        \n        // re-assign available block templates as options for the select in case they are updated\n        value.properties\n            .find(p => p.name === \"template\")\n            .options = (blockTemplates\n                .find(bt => bt.blockName === \"custom_prompt_field\")\n                ?.templates || [])\n                .filter(t => t.platform === this.getPlatform());\n        \n        this.setValue(value);\n    }\n\n    toXml(fieldElement) {\n        fieldElement.textContent = hydrate(this.value_);\n        return fieldElement;\n    }\n\n    render() {\n        return <ModalForm\n            title=\"Prompt Settings\"\n            data={this.value_}\n            onCancel={this.onCancel}\n            onSave={this.onSave}\n        />\n    }\n}\n\nBlockly.fieldRegistry.register('prompt_field', PromptField);\n\nexport default PromptField;\n","import * as Blockly from 'blockly/core';\n\n// Since we're using json to initialize the field, we'll need to import it.\nimport '../fields/BaseField';\n\nimport '../fields/ChainField';\nimport '../fields/ChatMessageField';\nimport '../fields/ChatModelField';\nimport '../fields/ChatPromptField';\nimport '../fields/EmbeddingField';\nimport '../fields/LlmField';\nimport '../fields/LoaderField';\nimport '../fields/MemoryField';\nimport '../fields/RetrieverField';\nimport '../fields/SplitterField';\nimport '../fields/ToolField';\nimport '../fields/UtilField';\nimport '../fields/VectorStoreField';\nimport '../fields/PromptField';\n\nimport { hydrate, platformTemplates, groupTemplatesByParent } from '../utils';\n\nconst customChatPromptFieldDef = require('./json-definitions/custom_chat_prompt_field.json');\nconst customLlmFieldDef = require('./json-definitions/custom_llm_field.json');\nconst customChainFieldDef = require('./json-definitions/custom_chain_field.json');\nconst customToolFieldDef = require('./json-definitions/custom_tool_field.json');\nconst customUtilFieldDef = require('./json-definitions/custom_util_field.json');\nconst customChatModelFieldDef = require('./json-definitions/custom_chat_model_field.json');\nconst customChatMessageFieldDef = require('./json-definitions/custom_chat_message_field.json');\nconst customLoaderFieldDef = require('./json-definitions/custom_loader_field.json');\nconst customVectorstoreFieldDef = require('./json-definitions/custom_vectorstore_field.json');\nconst customSplitterFieldDef = require('./json-definitions/custom_splitter_field.json');\nconst customEmbeddingFieldDef = require('./json-definitions/custom_embedding_field.json');\nconst customMemoryFieldDef = require('./json-definitions/custom_memory_field.json');\nconst customRetrieverFieldDef = require('./json-definitions/custom_retriever_field.json');\nconst customPromptFieldDef = require('./json-definitions/custom_prompt_field.json');\n\nconst blockTemplates = groupTemplatesByParent(platformTemplates());\n\n// assign the block templates \n[\n  { name: 'custom_chat_prompt_field', def: customChatPromptFieldDef },\n  { name: 'custom_llm_field', def: customLlmFieldDef },\n  { name: 'custom_chain_field', def: customChainFieldDef },\n  { name: 'custom_tool_field', def: customToolFieldDef },\n  { name: 'custom_util_field', def: customUtilFieldDef },\n  { name: 'custom_chat_model_field', def: customChatModelFieldDef },\n  { name: 'custom_chat_message_field', def: customChatMessageFieldDef },\n  { name: 'custom_loader_field', def: customLoaderFieldDef },\n  { name: 'custom_vectorstore_field', def: customVectorstoreFieldDef },\n  { name: 'custom_splitter_field', def: customSplitterFieldDef },\n  { name: 'custom_embedding_field', def: customEmbeddingFieldDef },\n  { name: 'custom_memory_field', def: customMemoryFieldDef },\n  { name: 'custom_retriever_field', def: customRetrieverFieldDef },\n  { name: 'custom_prompt_field', def: customPromptFieldDef },\n].forEach(t => {\n  t.def.properties\n    .find(p => p.name === \"template\")\n    .options = blockTemplates.find(bt => bt.blockName === t.name)?.templates;\n});\n\nconst customBaseField = {\n  \"type\": \"custom_base_field\",\n  \"message0\": \"custom field %1\",\n  \"args0\": [\n    {\n      \"type\": \"base_field\",\n      \"name\": \"FIELD\",\n      \"text\": \"Click me\"\n    },\n  ],\n  \"previousStatement\": null,\n  \"nextStatement\": null,\n};\n\nBlockly.Blocks['custom_base_field'] = {\n  init: function () {\n    this.jsonInit(customBaseField);\n    this.setStyle('loop_blocks');\n  }\n};\n\nconst customChatPromptField = {\n  \"type\": \"custom_chat_prompt_field\",\n  \"message0\": \"chat_prompt type %1 + settings\",\n  \"args0\": [\n    {\n      \"type\": \"chat_prompt_field\",\n      \"name\": \"CHAT_PROMPT\",\n      \"data\": hydrate(customChatPromptFieldDef)\n    }\n  ],\n  \"previousStatement\": null,\n  \"nextStatement\": null,\n  \"tooltip\": \"select chat_prompt settings\",\n  \"helpUrl\": \"\",\n};\n\nBlockly.Blocks[\"custom_chat_prompt_field\"] = {\n  init: function () {\n    this.jsonInit(customChatPromptField);\n    this.setStyle(\"procedure_blocks\");\n    this.setColour(220);\n  }\n};\n\nconst customLlmField = {\n  \"type\": \"custom_llm_field\",\n  \"message0\": \"llm type %1 + settings\",\n  \"args0\": [\n    {\n      \"type\": \"llm_field\",\n      \"name\": \"LLM\",\n      \"data\": hydrate(customLlmFieldDef)\n    }\n  ],\n  \"previousStatement\": null,\n  \"nextStatement\": null,\n  \"tooltip\": \"select llm settings\",\n  \"helpUrl\": \"\",\n};\n\nBlockly.Blocks[\"custom_llm_field\"] = {\n  init: function () {\n    this.jsonInit(customLlmField);\n    this.setStyle(\"procedure_blocks\");\n    this.setColour(30);\n  }\n};\n\nconst customChainField = {\n  \"type\": \"custom_chain_field\",\n  \"message0\": \"chain type %1 + settings\",\n  \"args0\": [\n    {\n      \"type\": \"chain_field\",\n      \"name\": \"CHAIN\",\n      \"data\": hydrate(customChainFieldDef)\n    }\n  ],\n  \"previousStatement\": null,\n  \"nextStatement\": null,\n  \"tooltip\": \"select chain settings\",\n  \"helpUrl\": \"\",\n};\n\nBlockly.Blocks[\"custom_chain_field\"] = {\n  init: function () {\n    this.jsonInit(customChainField);\n    this.setStyle(\"procedure_blocks\");\n    this.setColour(175);\n  }\n};\n\nconst customToolField = {\n  \"type\": \"custom_tool_field\",\n  \"message0\": \"tool type %1 + settings\",\n  \"args0\": [\n    {\n      \"type\": \"tool_field\",\n      \"name\": \"TOOL\",\n      \"data\": hydrate(customToolFieldDef)\n    }\n  ],\n  \"previousStatement\": null,\n  \"nextStatement\": null,\n  \"tooltip\": \"select tool settings\",\n  \"helpUrl\": \"\",\n};\n\nBlockly.Blocks[\"custom_tool_field\"] = {\n  init: function () {\n    this.jsonInit(customToolField);\n    this.setStyle(\"procedure_blocks\");\n    this.setColour(270);\n  }\n};\n\nconst customUtilField = {\n  \"type\": \"custom_util_field\",\n  \"message0\": \"util type %1 + settings\",\n  \"args0\": [\n    {\n      \"type\": \"util_field\",\n      \"name\": \"UTIL\",\n      \"data\": hydrate(customUtilFieldDef)\n    }\n  ],\n  \"previousStatement\": null,\n  \"nextStatement\": null,\n  \"tooltip\": \"select util settings\",\n  \"helpUrl\": \"\",\n};\n\nBlockly.Blocks[\"custom_util_field\"] = {\n  init: function () {\n    this.jsonInit(customUtilField);\n    this.setStyle(\"procedure_blocks\");\n    this.setColour(280);\n  }\n};\n\nconst customChatModelField = {\n  \"type\": \"custom_chat_model_field\",\n  \"message0\": \"chat_model type %1 + settings\",\n  \"args0\": [\n    {\n      \"type\": \"chat_model_field\",\n      \"name\": \"CHAT_MODEL\",\n      \"data\": hydrate(customChatModelFieldDef)\n    }\n  ],\n  \"previousStatement\": null,\n  \"nextStatement\": null,\n  \"tooltip\": \"select chat_model settings\",\n  \"helpUrl\": \"\",\n};\n\nBlockly.Blocks[\"custom_chat_model_field\"] = {\n  init: function () {\n    this.jsonInit(customChatModelField);\n    this.setStyle(\"procedure_blocks\");\n    this.setColour(230);\n  }\n};\n\nconst customChatMessageField = {\n  \"type\": \"custom_chat_message_field\",\n  \"message0\": \"chat_message type %1 + settings\",\n  \"args0\": [\n    {\n      \"type\": \"chat_message_field\",\n      \"name\": \"CHAT_MESSAGE\",\n      \"data\": hydrate(customChatMessageFieldDef)\n    }\n  ],\n  \"previousStatement\": null,\n  \"nextStatement\": null,\n  \"tooltip\": \"select chat_message settings\",\n  \"helpUrl\": \"\",\n};\n\nBlockly.Blocks[\"custom_chat_message_field\"] = {\n  init: function () {\n    this.jsonInit(customChatMessageField);\n    this.setStyle(\"procedure_blocks\");\n    this.setColour(240);\n  }\n};\n\nconst customLoaderField = {\n  \"type\": \"custom_loader_field\",\n  \"message0\": \"loader type %1 + settings\",\n  \"args0\": [\n    {\n      \"type\": \"loader_field\",\n      \"name\": \"LOADER\",\n      \"data\": hydrate(customLoaderFieldDef)\n    }\n  ],\n  \"previousStatement\": null,\n  \"nextStatement\": null,\n  \"tooltip\": \"select loader settings\",\n  \"helpUrl\": \"\",\n};\n\nBlockly.Blocks[\"custom_loader_field\"] = {\n  init: function () {\n    this.jsonInit(customLoaderField);\n    this.setStyle(\"procedure_blocks\");\n    this.setColour(60);\n  }\n};\n\nconst customVectorstoreField = {\n  \"type\": \"custom_vectorstore_field\",\n  \"message0\": \"vectorstore type %1 + settings\",\n  \"args0\": [\n    {\n      \"type\": \"vectorstore_field\",\n      \"name\": \"VECTORSTORE\",\n      \"data\": hydrate(customVectorstoreFieldDef)\n    }\n  ],\n  \"previousStatement\": null,\n  \"nextStatement\": null,\n  \"tooltip\": \"select vectorstore settings\",\n  \"helpUrl\": \"\",\n};\n\nBlockly.Blocks[\"custom_vectorstore_field\"] = {\n  init: function () {\n    this.jsonInit(customVectorstoreField);\n    this.setStyle(\"procedure_blocks\");\n    this.setColour(80);\n  }\n};\n\nconst customSplitterField = {\n  \"type\": \"custom_splitter_field\",\n  \"message0\": \"splitter type %1 + settings\",\n  \"args0\": [\n    {\n      \"type\": \"splitter_field\",\n      \"name\": \"SPLITTER\",\n      \"data\": hydrate(customSplitterFieldDef)\n    }\n  ],\n  \"previousStatement\": null,\n  \"nextStatement\": null,\n  \"tooltip\": \"select splitter settings\",\n  \"helpUrl\": \"\",\n};\n\nBlockly.Blocks[\"custom_splitter_field\"] = {\n  init: function () {\n    this.jsonInit(customSplitterField);\n    this.setStyle(\"procedure_blocks\");\n    this.setColour(100);\n  }\n};\n\nconst customEmbeddingField = {\n  \"type\": \"custom_embedding_field\",\n  \"message0\": \"embedding type %1 + settings\",\n  \"args0\": [\n    {\n      \"type\": \"embedding_field\",\n      \"name\": \"EMBEDDING\",\n      \"data\": hydrate(customEmbeddingFieldDef)\n    }\n  ],\n  \"previousStatement\": null,\n  \"nextStatement\": null,\n  \"tooltip\": \"select embedding settings\",\n  \"helpUrl\": \"\",\n};\n\nBlockly.Blocks[\"custom_embedding_field\"] = {\n  init: function () {\n    this.jsonInit(customEmbeddingField);\n    this.setStyle(\"procedure_blocks\");\n    this.setColour(120);\n  }\n};\n\nconst customMemoryField = {\n  \"type\": \"custom_memory_field\",\n  \"message0\": \"memory type %1 + settings\",\n  \"args0\": [\n    {\n      \"type\": \"memory_field\",\n      \"name\": \"MEMORY\",\n      \"data\": hydrate(customMemoryFieldDef)\n    }\n  ],\n  \"previousStatement\": null,\n  \"nextStatement\": null,\n  \"tooltip\": \"select memory settings\",\n  \"helpUrl\": \"\",\n};\n\nBlockly.Blocks[\"custom_memory_field\"] = {\n  init: function () {\n    this.jsonInit(customMemoryField);\n    this.setStyle(\"procedure_blocks\");\n    this.setColour(140);\n  }\n};\n\nconst customRetrieverField = {\n  \"type\": \"custom_retriever_field\",\n  \"message0\": \"retriever type %1 + settings\",\n  \"args0\": [\n    {\n      \"type\": \"retriever_field\",\n      \"name\": \"RETRIEVER\",\n      \"data\": hydrate(customRetrieverFieldDef)\n    }\n  ],\n  \"previousStatement\": null,\n  \"nextStatement\": null,\n  \"tooltip\": \"select retriever settings\",\n  \"helpUrl\": \"\",\n};\n\nBlockly.Blocks[\"custom_retriever_field\"] = {\n  init: function () {\n    this.jsonInit(customRetrieverField);\n    this.setStyle(\"procedure_blocks\");\n    this.setColour(160);\n  }\n};\n\nconst customPromptField = {\n  \"type\": \"custom_prompt_field\",\n  \"message0\": \"prompt type %1 + settings\",\n  \"args0\": [\n    {\n      \"type\": \"prompt_field\",\n      \"name\": \"PROMPT\",\n      \"data\": hydrate(customPromptFieldDef)\n    }\n  ],\n  \"previousStatement\": null,\n  \"nextStatement\": null,\n  \"tooltip\": \"select prompt settings\",\n  \"helpUrl\": \"\",\n};\n\nBlockly.Blocks[\"custom_prompt_field\"] = {\n  init: function () {\n    this.jsonInit(customPromptField);\n    this.setStyle(\"procedure_blocks\");\n    this.setColour(954);\n  }\n};\n","/**\n * @license\n * \n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Define generation methods for custom blocks.\n * @author samelh@google.com (Sam El-Husseini)\n */\n\n// More on generating code:\n// https://developers.google.com/blockly/guides/create-custom-blocks/generating-code\n\nimport * as Blockly from 'blockly/core';\nimport 'blockly/javascript';\n\nBlockly.JavaScript['custom_base_field'] = function (block) {\n    return 'console.log(\\'custom block\\');\\n';\n};\n","import * as Blockly from 'blockly/core';\nimport moment from 'moment';\n\nimport { srcAppTemplates, srcTemplates } from '../utils';\n\nconst platforms = [];\nnew Set(srcTemplates.names.map(n => n.split('/')[1]))\n  .forEach(n => platforms.push(n));\n\nBlockly.Blocks['application'] = {\n  init: function () {\n    this.appendDummyInput()\n      .appendField(\"application\")\n      .appendField(new Blockly.FieldTextInput(`Application-` + moment().format('MM-DD-YY:HH:mm:ss')), \"APPLICATION_NAME\")\n      .appendField(\"platform\")\n      .appendField(new Blockly.FieldDropdown(\n        platforms.filter(p => p === 'langchain').map(p => [p, p.toUpperCase()])\n      ), \"PLATFORM\")\n      .appendField(\"template\")\n      .appendField(new Blockly.FieldDropdown(\n        srcAppTemplates.map(t => {\n          const nameParts = t.split('/');\n          const tplName = nameParts[nameParts.length - 1].split('.')[0];\n\n          return [tplName, tplName.toUpperCase()];\n        })\n      ), \"TEMPLATE\");\n    this.appendStatementInput(\"APPLICATION_STATEMENTS\")\n      .setCheck(null);\n    this.setColour(230);\n    this.setTooltip(\"application configuration\");\n    this.setHelpUrl(\"\");\n  }\n};\n\nBlockly.Blocks['chains'] = {\n  init: function () {\n    this.appendDummyInput()\n      .appendField(\"chain\");\n    this.appendStatementInput(\"CHAIN_STATEMENTS\")\n      .setCheck(\"chain\");\n    this.setPreviousStatement(true, null);\n    this.setNextStatement(true, null);\n    this.setColour(145);\n    this.setTooltip(\"chains configuration\");\n    this.setHelpUrl(\"\");\n  }\n};\n\nBlockly.Blocks['tools'] = {\n  init: function () {\n    this.appendDummyInput()\n      .appendField(\"agent\");\n    this.appendStatementInput(\"TOOL_STATEMENTS\")\n      .setCheck(\"tool\");\n    this.setPreviousStatement(true, null);\n    this.setNextStatement(true, null);\n    this.setColour(260);\n    this.setTooltip(\"agent configuration\");\n    this.setHelpUrl(\"\");\n  }\n};\n\nBlockly.Blocks['prompts'] = {\n  init: function () {\n    this.appendDummyInput()\n      .appendField(\"prompts\");\n    this.appendStatementInput(\"PROMPT_STATEMENTS\")\n      .setCheck(\"prompt\");\n    this.setPreviousStatement(true, null);\n    this.setNextStatement(true, null);\n    this.setColour(940);\n    this.setTooltip(\"prompts configuration\");\n    this.setHelpUrl(\"\");\n  }\n};\n","import * as Blockly from 'blockly/core';\nimport 'blockly/javascript';\nimport { evalSource } from '../utils';\n\nBlockly.JavaScript['application'] = function (block) {\n  return evalSource(\n    block,\n    /*root*/ null,\n    /*props*/[\n      {\n        propertyName: 'name',\n        fieldName: 'APPLICATION_NAME',\n        isVariable: false,\n        transform: null,\n        assignment: null\n      },\n      {\n        propertyName: 'platform',\n        fieldName: 'PLATFORM',\n        isVariable: false,\n        transform: null,\n        assignment: null\n      }\n    ],\n    /*statements*/[\n      {\n        isArray: false,\n        fieldName: 'APPLICATION_STATEMENTS',\n      }\n    ],\n    /*isArray*/ false,\n    /*appendSufix*/ false\n  );\n};\n\nBlockly.JavaScript['chains'] = function (block) {\n  return evalSource(\n    block,\n    /*root*/ 'chains',\n    /*props*/ null,\n    /*statements*/[\n      {\n        isArray: true,\n        fieldName: 'CHAIN_STATEMENTS',\n      }\n    ],\n    /*isArray*/ true\n  );\n};\n\nBlockly.JavaScript['custom_chat_prompt_field'] = function (block) {\n  return evalSource(block, 'chat_prompt', [\n    {\n      propertyName: 'type',\n      fieldName: 'CHAT_PROMPT',\n      isVariable: false,\n      transform: null,\n      assignment: null\n    }\n  ]);\n};\n\nBlockly.JavaScript['custom_llm_field'] = function (block) {\n  return evalSource(block, 'llm', [\n    {\n      propertyName: 'type',\n      fieldName: 'LLM',\n      isVariable: false,\n      transform: null,\n      assignment: null\n    }\n  ]);\n};\n\nBlockly.JavaScript['custom_llm_field'] = function (block) {\n  return evalSource(block, 'llm', [\n    {\n      propertyName: 'type',\n      fieldName: 'LLM',\n      isVariable: false,\n      transform: null,\n      assignment: null\n    }\n  ]);\n};\n\nBlockly.JavaScript['custom_chain_field'] = function (block) {\n  return evalSource(block, 'chain', [\n    {\n      propertyName: 'type',\n      fieldName: 'CHAIN',\n      isVariable: false,\n      transform: null,\n      assignment: null\n    }\n  ]);\n};\n\nBlockly.JavaScript['custom_tool_field'] = function (block) {\n  return evalSource(block, 'tool', [\n    {\n      propertyName: 'type',\n      fieldName: 'TOOL',\n      isVariable: false,\n      transform: null,\n      assignment: null\n    }\n  ]);\n};\n\nBlockly.JavaScript['custom_util_field'] = function (block) {\n  return evalSource(block, 'util', [\n    {\n      propertyName: 'type',\n      fieldName: 'UTIL',\n      isVariable: false,\n      transform: null,\n      assignment: null\n    }\n  ]);\n};\n\nBlockly.JavaScript['custom_chat_model_field'] = function (block) {\n  return evalSource(block, 'chat_model', [\n    {\n      propertyName: 'type',\n      fieldName: 'CHAT_MODEL',\n      isVariable: false,\n      transform: null,\n      assignment: null\n    }\n  ]);\n};\n\nBlockly.JavaScript['custom_chat_message_field'] = function (block) {\n  return evalSource(block, 'chat_message', [\n    {\n      propertyName: 'type',\n      fieldName: 'CHAT_MESSAGE',\n      isVariable: false,\n      transform: null,\n      assignment: null\n    }\n  ]);\n};\n\nBlockly.JavaScript['custom_loader_field'] = function (block) {\n  return evalSource(block, 'loader', [\n    {\n      propertyName: 'type',\n      fieldName: 'LOADER',\n      isVariable: false,\n      transform: null,\n      assignment: null\n    }\n  ]);\n};\n\nBlockly.JavaScript['custom_vectorstore_field'] = function (block) {\n  return evalSource(block, 'vectorstore', [\n    {\n      propertyName: 'type',\n      fieldName: 'VECTORSTORE',\n      isVariable: false,\n      transform: null,\n      assignment: null\n    }\n  ]);\n};\n\nBlockly.JavaScript['custom_splitter_field'] = function (block) {\n  return evalSource(block, 'splitter', [\n    {\n      propertyName: 'type',\n      fieldName: 'SPLITTER',\n      isVariable: false,\n      transform: null,\n      assignment: null\n    }\n  ]);\n};\n\nBlockly.JavaScript['custom_embedding_field'] = function (block) {\n  return evalSource(block, 'embedding', [\n    {\n      propertyName: 'type',\n      fieldName: 'EMBEDDING',\n      isVariable: false,\n      transform: null,\n      assignment: null\n    }\n  ]);\n};\n\nBlockly.JavaScript['custom_memory_field'] = function (block) {\n  return evalSource(block, 'memory', [\n    {\n      propertyName: 'type',\n      fieldName: 'MEMORY',\n      isVariable: false,\n      transform: null,\n      assignment: null\n    }\n  ]);\n};\n\nBlockly.JavaScript['custom_retriever_field'] = function (block) {\n  return evalSource(block, 'retriever', [\n    {\n      propertyName: 'type',\n      fieldName: 'RETRIEVER',\n      isVariable: false,\n      transform: null,\n      assignment: null\n    }\n  ]);\n};\n\nBlockly.JavaScript['prompts'] = function (block) {\n  return evalSource(\n    block,\n    /*root*/ 'prompts',\n    /*props*/ null,\n    /*statements*/[\n      {\n        isArray: true,\n        fieldName: 'PROMPT_STATEMENTS',\n      }\n    ],\n    /*isArray*/ true\n  );\n};\n\nBlockly.JavaScript['custom_prompt_field'] = function (block) {\n  return evalSource(block, 'prompt', [\n    {\n      propertyName: 'type',\n      fieldName: 'PROMPT',\n      isVariable: false,\n      transform: null,\n      assignment: null\n    }\n  ]);\n};\n\nBlockly.JavaScript['tools'] = function (block) {\n  return evalSource(\n    block,\n    /*root*/ 'tools',\n    /*props*/ null,\n    /*statements*/[\n      {\n        isArray: true,\n        fieldName: 'TOOL_STATEMENTS',\n      }\n    ],\n    /*isArray*/ true\n  );\n};\n","import * as Handlebars from 'handlebars';\n\nHandlebars.registerHelper({\n  eq: (v1, v2) => v1 === v2,\n  ne: (v1, v2) => v1 !== v2,\n  lt: (v1, v2) => v1 < v2,\n  gt: (v1, v2) => v1 > v2,\n  lte: (v1, v2) => v1 <= v2,\n  gte: (v1, v2) => v1 >= v2,\n  and() {\n    return Array.prototype.every.call(arguments, Boolean);\n  },\n  or() {\n    return Array.prototype.slice.call(arguments, 0, -1).some(Boolean);\n  }\n});\n\n// { settings: [{ name: 'x', value: 1.0 }]}\nHandlebars.registerHelper(\"arrayprop\", (array, index, name, defaultValue = '') =>\n  Array.isArray(array) && index < array.length\n    ? array[index][name]\n    : defaultValue);\n\nHandlebars.registerHelper(\"findarrayprop\", (array, name, defaultValue) => {\n  if (!Array.isArray(array)) return defaultValue;\n\n  const item = array.find(a => a.name.toLowerCase() === name.toLowerCase())\n  return item\n    ? item.value\n    : defaultValue;\n})\n\n//split=['train[:80%]', 'train[80%:90%]', 'train[90%:]']\nHandlebars.registerHelper(\"trainsplit\", (value) => `train[:${value}%]`);\nHandlebars.registerHelper(\"testsplit\", (v1, v2) => `train[${v1}%:${(parseInt(v1, 10) + parseInt(v2, 10))}%]`);\nHandlebars.registerHelper(\"valsplit\", (v1, v2) => `train[${((parseInt(v1, 10) + parseInt(v2, 10)))}%:]`);\n\n//EarlyStopping\nHandlebars.registerHelper(\"varialize\", (value) =>\n  `${value[0].toLowerCase()}${value.substring(1).replace(/[A-Z]/g, (m, $1) => `_${m.toLowerCase()}`)}`);\n\nHandlebars.registerHelper(\"quote\", (value) => {\n  if (typeof value === 'string') return `'${value}'`;\n  if (typeof value === 'boolean') {\n    const boolVal = `${value}`;\n    return `${boolVal[0].toUpperCase()}${boolVal.substring(1)}`;\n  }\n  return value\n});\n","import * as Blockly from 'blockly/core';\nimport 'blockly/python';\n\nimport { evalSource, platformTemplates } from '../utils';\nimport './handlebars-helpers';\n\nconst platforms = [];\nwindow['output'] = [];\nwindow['platform'] = null;\nwindow['appProps'] = null;\n\nplatformTemplates(platforms, true);\n\nconst getPlatformTemplate = (name) => {\n  return platforms\n    .find(p => p.name.toLowerCase() === window['platform'].toLowerCase())\n    .templates\n    .find(t => t.name.toLowerCase() === name.toLowerCase());\n}\n\nBlockly.Python['application'] = function (block) {\n  window['platform'] = block.getFieldValue('PLATFORM');\n  block.template = getPlatformTemplate(block.getFieldValue('TEMPLATE'));\n  block.raiseOnDone = true;\n\n  // find and set the app properties\n  window['appProps'] = null;\n\n  const db = block.workspace.blockDB_;\n  const key = Object.keys(db).find(k => db[k].type === 'dataset_training');\n  if (key && window['platform'].toLowerCase() === 'pieml') {\n    const item = db[key].inputList[0]\n    const type = item.fieldRow.find(fr => fr.name === 'TRAIN').value_.toLowerCase();\n    const flavor = item.fieldRow.find(fr => fr.name === 'FLAVOR').value_.toLowerCase();\n    window['appProps'] = { type, flavor }\n  }\n\n  // reset python output\n  window['output'].splice(0, window['output'].length);\n\n  const obj = evalSource(\n    block,\n    /*root*/ null,\n    /*props*/[\n      {\n        propertyName: 'name',\n        fieldName: 'APPLICATION_NAME',\n        isVariable: false,\n        transform: null,\n        assignment: null,\n      },\n      {\n        propertyName: 'platform',\n        fieldName: 'PLATFORM',\n        isVariable: false,\n        transform: (value) => value.toLowerCase(),\n        assignment: null,\n      },\n      {\n        propertyName: 'template',\n        fieldName: 'TEMPLATE',\n        isVariable: false,\n        transform: (value) => value.toLowerCase(),\n        assignment: null,\n      }\n    ],\n    /*statements*/[\n      {\n        isArray: false,\n        fieldName: 'APPLICATION_STATEMENTS',\n      }\n    ],\n    /*isArray*/ false,\n    /*appendSufix*/ false\n  );\n\n  return JSON.stringify(obj);\n};\n\nBlockly.Python['chains'] = function (block) {\n  block.template = getPlatformTemplate(block.type);\n  return evalSource(\n    block,\n    /*root*/ 'chains',\n    /*props*/ null,\n    /*statements*/[\n      {\n        isArray: true,\n        fieldName: 'CHAIN_STATEMENTS',\n      }\n    ],\n    /*isArray*/ true\n  );\n};\n\nBlockly.Python['custom_chain_field'] = function (block) {\n  block.template = getPlatformTemplate(block.getFieldValue('CHAIN').template);\n  return evalSource(block, 'chain', [\n    {\n      propertyName: 'options',\n      fieldName: 'CHAIN',\n      isVariable: false,\n      transform: null,\n      assignment: null,\n    }\n  ]);\n};\n\nBlockly.Python['tools'] = function (block) {\n  block.template = getPlatformTemplate(block.type);\n  return evalSource(\n    block,\n    /*root*/ 'tools',\n    /*props*/ null,\n    /*statements*/[\n      {\n        isArray: true,\n        fieldName: 'TOOL_STATEMENTS',\n      }\n    ],\n    /*isArray*/ true\n  );\n};\n","export enum eRunMode {\n    Local = 1,\n    Remote = 2\n}\n\nexport type IStoreContext = {\n    getApplications(): IApplication[],\n    setApplications(apps: IApplication[]): void,\n    getSelectedApplicationId(): string,\n    setSelectedApplicationId(id: string): void,\n    getTopMenu(): ITopMenu[],\n    getLeftMenu(): ILeftMenu[],\n    setLeftMenu(menu: ILeftMenu[]): void,\n}\n\nexport type IApiContext = {\n    buildLangChain(elements: any): Promise<string>,\n}\n\nexport type IDataContext = {\n    store: IStoreContext,\n    api: IApiContext,\n    whoAmI: string,\n}\n\nexport type IApplication = {\n    name: string\n    id: string\n    content: string\n    json: any\n}\n\nexport type IOption = {\n    name: string\n    label: string\n    link: string\n    icon: any\n    app: IApplication\n}\n\nexport type ITopMenu = {\n    label: string\n    link: string\n    icon: any\n    options: IOption[] | undefined\n}\n\nexport type ILeftMenu = {\n    label: string\n    link: string\n    icon: any\n    items: IApplication[] | undefined\n}\n\nexport type IBlockProperty = {\n    propertyName: string\n    fieldName: string\n    isVariable: boolean | undefined\n    transform: any | undefined\n    assignment: any | undefined\n}\n\nexport type IStatement = {\n    fieldName: string\n    isArray: boolean\n}\n\nexport type IOutput = {\n    type: string\n    order: number\n    content: string\n    source: any\n}\n\nexport type IAppProp = {\n    name: string\n    value: any\n}\n\nexport type ICustomWindow = {\n    window: Window\n    output: IOutput[]\n    appProps: IAppProp[]\n}\n","import React from 'react';\n\nimport { IDataContext } from './types';\n\nconst DataContext = React.createContext<IDataContext>({\n    whoAmI: 'unknown context',\n    store: {\n        getApplications: () => [],\n        setApplications: (apps) => { },\n        getSelectedApplicationId: () => '',\n        setSelectedApplicationId: (id) => { },\n        getTopMenu: () => [],\n        getLeftMenu: () => [],\n        setLeftMenu: (menu) => { },\n    },\n    api: {\n        buildLangChain: async (elements: any) => null,\n    }\n});\n\nexport default DataContext;","/// <reference path=\"../node_modules/blockly/blockly.d.ts\"/>\n/// <reference path=\"../node_modules/blockly/python.js\"/>\n/// <reference path=\"../node_modules/blockly/core.js\"/>\n\nimport React, { useContext, useState } from 'react';\n\nimport BlocklyPython from 'blockly/python';\nimport Blockly from 'blockly';\nimport * as BlocklyCore from 'blockly/core'\n\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport Layout from './components/layout';\nimport ToastMessage from './components/toast-message';\nimport BlocklyComponent, { Block } from './Blockly';\n\nimport './blocks/customblocks';\nimport './generator/generator';\nimport './blocks/ml-blocks';\nimport './generator/ml-blocks-generator';\nimport './generator/ml-blocks-generator-python';\n\nimport DataContext from './context';\n\nimport {\n  newApp,\n  xmlFields,\n} from './utils';\n\nimport { IApplication, IOption, ILeftMenu } from './types';\n\nconst App = () => {\n  const ctx = useContext(DataContext);\n  const store = ctx.store;\n  const buildToastAction = (title: string, message: string, isVisible = false) => ({ title, message, isVisible });\n  const defaultToastAction = buildToastAction('', '');\n  const [applications, setApplications] = useState(store.getApplications());\n  const [selectedApplicationId, setSelectedApplicationId] = useState(store.getSelectedApplicationId());\n  const [application, setApplication] = useState(applications.find((app: IApplication) => app.id === selectedApplicationId) || newApp());\n  const [initialXml, setInitialXml] = useState(application?.content);\n  const [topMenu,] = useState(store.getTopMenu());\n  const [leftMenu, setLeftMenu] = useState(store.getLeftMenu());\n  const [isBusy, setIsBusy] = useState(true);\n  const [toastAction, setToastAction] = useState(defaultToastAction);\n\n  let simpleWorkspace: BlocklyComponent;\n  const isRemote = ctx.whoAmI === \"remote context\";\n\n  const onItemSelected = (option: IOption, index: number) => {\n    switch (option.link) {\n      case \"#new\":\n        addApplication(newApp());\n        break;\n      case \"#save\":\n        saveApplication();\n        break;\n      case \"#download\":\n        downloadApplications();\n        break;\n      case \"#add-sample\":\n        addApplication(option.app || newApp());\n        break;\n      default: /*Selected Application item*/\n        loadApplication(index);\n        break;\n    }\n  }\n\n  const onItemRemoved = (option: IOption, index: number) => {\n    setIsBusy(true);\n\n    const app = newApp();\n    const tmpApps = [...applications];\n    const isSingleApp = applications.length === 1;\n    if (isSingleApp)\n      tmpApps.splice(tmpApps.indexOf(application), 1, app);\n    else\n      tmpApps.splice(tmpApps.indexOf(application), 1);\n    const apps = [\n      ...tmpApps,\n    ];\n    const selApp = isSingleApp ? app : apps[0];\n    setSelectedApplicationId(selApp.id);\n    setApplication(selApp);\n    setApplications(apps);\n    const menu = [...leftMenu];\n    menu[0].items = [...apps];\n    setLeftMenu(menu);\n    setToastAction(buildToastAction('Application removed', `${option.name} has been successfuly removed`, true));\n    saveState(apps, selApp.id, menu);\n    setTimeout(() => {\n      document.location.reload();\n    }, 500);\n  }\n\n  const onItemClonned = (option: IOption, index: number) => {\n    const tmpApp = newApp();\n    const app = {\n      ...application,\n      id: tmpApp.id,\n      name: `${application.name}-${tmpApp.name.replace('Application-', '')}`\n    };\n    addApplication(app)\n  }\n\n  const saveState = (apps: IApplication[], selAppId: string, menu: ILeftMenu[], clearBusy: boolean = true) => {\n    store.setApplications(apps);\n    store.setSelectedApplicationId(selAppId);\n    store.setLeftMenu(menu);\n    if (clearBusy) setIsBusy(false);\n  }\n\n  const loadApplication = (index: number) => {\n    const app = applications[index];\n    if (selectedApplicationId !== app.id) {\n      setIsBusy(true);\n      setSelectedApplicationId(app.id);\n      setApplication(app)\n      setInitialXml(app.content);\n      saveState(applications, app.id, leftMenu);\n      document.location.reload();\n    }\n  }\n\n  const addApplication = (existingApp: IApplication) => {\n    setIsBusy(true);\n    const app = existingApp || newApp();\n    setSelectedApplicationId(app.id);\n    setApplication(app);\n    const apps = [...applications, app];\n    setApplications(apps)\n    const menu = [...leftMenu];\n    menu[0].items = [...apps];\n    setLeftMenu(menu);\n    setInitialXml(app.content);\n    setToastAction(buildToastAction('Application added', `${app.name} has been successfuly added`, true));\n    saveState(apps, app.id, menu);\n    setTimeout(() => {\n      document.location.reload();\n    }, 500);\n  }\n\n  const onOutputDone = (outputList, saveAsNotebook = true) => {\n    if (outputList.filter(o => o.isPending === true).length) {\n      return;\n    }\n\n    // console.log('outputList: ', JSON.stringify(outputList))\n\n    const elements = [];\n    for (const item of outputList) {\n      const arrayItems = ['chains', 'tools']\n      for (const arrayItemName of arrayItems) {\n        if (!!item['source'][arrayItemName]) {\n          for (const chainItem of item['source'][arrayItemName]) {\n            const propName = Object.keys(chainItem)[0]\n            const prop = chainItem[propName]\n            if (Array.isArray(prop)) {\n              const prompts = []\n              for (const innerItem of prop) {\n                const innerPropName = Object.keys(innerItem)[0]\n                const innerProp = innerItem[innerPropName]\n                prompts.push({\n                  type: innerPropName.toUpperCase(),\n                  name: innerProp['type']['type'],\n                  arguments: innerProp['type']['settings'],\n                  index: 0,\n                });              \n              }\n              elements.push({\n                type: prompts[0].type,\n                name: prompts.map(p => p.arguments[0].value).join('. '),\n                arguments: [],\n                index: 99999999\n              })\n            } else {\n              elements.push({\n                type: propName.toUpperCase().replace('VECTORSTORE', 'STORE'),\n                name: prop['type']['type'],\n                arguments: prop['type']['settings'],\n                index: 0,\n              });\n            }\n          }\n        }\n      }\n    }\n    \n    const api = window['api'];\n    api.buildLangChain({ elements: elements })\n      .then(json => {\n        const content = json.lines.join('\\n')\n        const out = {\n          content,\n          mimeType: 'application/python',\n          extension: 'py',\n        };\n        downloader(out.content, out.mimeType, `${window['applicationName'] || application.name}.${out.extension}`);\n        setIsBusy(false);    \n      });\n  }\n\n  const saveApplication = () => {\n    setIsBusy(true);\n    window['api'] = ctx.api;\n    window['onOutputDone'] = isRemote ? onOutputDone: (outputList, saveAsNotebook) => {};\n    const json = JSON.parse(JSON.parse(BlocklyPython.workspaceToCode(simpleWorkspace.workspace)));\n\n    const xml = Blockly.Xml.workspaceToDom(simpleWorkspace.workspace);\n    const content = Blockly.Xml.domToText(xml);\n\n    const app = {\n      id: application.id,\n      name: json.name,\n      content: content,\n      json: json\n    };\n    window['applicationName'] = app.name;\n    const tmpApps = [...applications];\n    tmpApps.splice(tmpApps.indexOf(application), 1, app);\n    const apps = [\n      ...tmpApps,\n    ];\n    setApplication(app);\n    setApplications(apps);\n    const menu = [...leftMenu];\n    menu[0].items = [...apps];\n    setLeftMenu(menu);\n    setToastAction(buildToastAction('Application saved', `${app.name} has been successfuly saved`, true));\n    saveState(apps, selectedApplicationId, menu, false);\n\n    if (!isRemote) onOutputDone(window['output']);\n  }\n\n  const downloadApplications = () => {\n    const apps = [...applications];\n    apps.forEach(a => {\n      const origName = a.name;\n      a.name = `${a.name}-Sample`;\n      if (a.content.indexOf(a.name) < 0) a.content = a.content.replace(`>${origName}<`, `>${a.name}<`);\n      a.json = {};\n    });\n    downloader(JSON.stringify(apps), 'application/json', `sample-applications.json`);\n  }\n\n  const downloadUri = (uri: string, name: string) => {\n    const link = document.createElement('a');\n    link.download = name;\n    link.href = uri;\n    link.click();\n  }\n\n  const downloader = (data: BlobPart, type: string, name: string) => {\n    const blob = new Blob([data], { type });\n    let url = window.URL.createObjectURL(blob);\n    downloadUri(url, name);\n    window.URL.revokeObjectURL(url);\n  }\n\n  window.onload = (ev: Event) => setIsBusy(false);\n\n  const raisedEvent = (e: any) => {\n    if (e instanceof Blockly.Events.Ui) {\n      return;  // Don't mirror UI events.\n    }\n    var json = e.toJson();\n    const fields = [\"PLATFORM\", \"TEMPLATE\", \"TRAIN\", \"FLAVOR\"];\n    switch (json.type) {\n      case \"create\":\n        const xml = json.xml;\n        const matches = xmlFields(xml, fields);\n        fields.forEach((f: any) => {\n          window[f] = matches.find(m => m.name === f)?.value;\n        });\n        break;\n      case \"change\":\n        if (fields.includes(json.name)) {\n          window[json.name] = json.newValue.toLowerCase();\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  return (\n    <div className=\"App\">\n      <Layout onItemSelected={onItemSelected} onItemRemoved={onItemRemoved} onItemClonned={onItemClonned} topMenu={topMenu} leftMenu={leftMenu} isBusy={isBusy}>\n        <BlocklyComponent ref={(e: BlocklyComponent) => {\n          simpleWorkspace = e;\n          if (!!e) e.primaryWorkspace.addChangeListener(raisedEvent)\n        }}\n          theme={BlocklyCore.Themes.Dark}\n          readOnly={false}\n          trashcan={true}\n          media={'media/'}\n          move={{\n            scrollbars: false,\n            drag: true,\n            wheel: true\n          }}\n          zoom={{\n            controls: true,\n            wheel: true,\n            startScale: 1,\n            maxScale: 3,\n            minScale: 0.3,\n            scaleSpeed: 1.2\n          }}\n          grid={{\n            spacing: 20,\n            length: 1,\n            snap: true\n          }}\n          initialXml={initialXml}>\n          <Block type=\"chains\" />\n          <Block type=\"custom_chain_field\" />\n          <Block type=\"tools\" />\n          <Block type=\"custom_tool_field\" />\n          <Block type=\"custom_util_field\" />\n          <Block type=\"custom_llm_field\" />\n          <Block type=\"custom_loader_field\" />\n          <Block type=\"custom_splitter_field\" />\n          <Block type=\"custom_embedding_field\" />\n          <Block type=\"custom_retriever_field\" />\n          <Block type=\"custom_memory_field\" />\n          <Block type=\"custom_vectorstore_field\" />\n          <Block type=\"custom_chat_model_field\" />\n          <Block type=\"custom_chat_message_field\" />\n          <Block type=\"custom_chat_prompt_field\" />\n          <Block type=\"prompts\" />\n          <Block type=\"custom_prompt_field\" />\n        </BlocklyComponent>\n      </Layout>\n      {toastAction.isVisible && <ToastMessage title={toastAction.title} message={toastAction.message} onClose={e => setToastAction(defaultToastAction)} />}\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { eRunMode } from './types';\n\nconst config = {\n    runMode: eRunMode.Local,\n    apiUrl: 'http://localhost:8888/api',\n}\n\nexport default config;\n","import {\n    faFolderOpen,\n    faSave,\n    faPlusSquare,\n    faLightbulb,\n    faFileImage,\n    faArrowAltCircleDown\n} from \"@fortawesome/free-regular-svg-icons\";\nimport { newApp, APPLICATIONS_KEY, SELECTED_APPLICATION_ID_KEY } from './utils';\nimport { IDataContext, IApplication, ILeftMenu } from './types';\nimport config from './config';\n\nconst sampleApplications = require('./blocks/json-definitions/sample-applications.json');\n\nconst getDefaultApp = () => {\n    const applications = [newApp()];\n    localStorage.setItem(APPLICATIONS_KEY, JSON.stringify(applications));\n    localStorage.setItem(SELECTED_APPLICATION_ID_KEY, applications[0].id);\n    return applications;\n}\nconst _getApplications = (): IApplication[] =>\n    JSON.parse(localStorage.getItem(APPLICATIONS_KEY) || '[]') || getDefaultApp();\n\nconst _getSelectedApplicationId = (): string =>\n    localStorage.getItem(SELECTED_APPLICATION_ID_KEY) || '';\n\nlet _leftMenu: ILeftMenu[] = [\n    {\n        label: 'Applications',\n        link: '#applications',\n        icon: faFolderOpen,\n        items: _getApplications(),\n    }\n];\n\nconst _requestOptions = (method: string = 'get', mimeType: string = 'application/json'): RequestInit => ({\n    method: method,\n    mode: 'cors',\n    headers: {\n        'Accept': mimeType\n    },\n});\n\nconst localDataContext: IDataContext = {\n    whoAmI: 'local context',\n    store: {\n        getApplications: _getApplications,\n        setApplications: (apps) => localStorage.setItem(APPLICATIONS_KEY, JSON.stringify(apps)),\n        getSelectedApplicationId: _getSelectedApplicationId,\n        setSelectedApplicationId: (id) => localStorage.setItem(SELECTED_APPLICATION_ID_KEY, id),\n        getTopMenu: () => [\n            {\n                label: 'New',\n                link: '#new',\n                icon: faPlusSquare,\n                options: undefined,\n            },\n            {\n                label: '+ Sample',\n                link: '#add-sample',\n                icon: faLightbulb,\n                options: sampleApplications.map((app: IApplication) => (\n                    {\n                        label: app.name,\n                        link: '#add-sample',\n                        icon: faFileImage,\n                        app\n                    }\n                ))\n            },\n            {\n                label: 'Download',\n                link: '#download',\n                icon: faArrowAltCircleDown,\n                options: undefined,\n            },\n            {\n                label: 'Save',\n                link: '#save',\n                icon: faSave,\n                options: undefined,\n            }\n        ],\n        getLeftMenu: () => _leftMenu,\n        setLeftMenu: (menu) => _leftMenu = [...menu],\n    },\n    api: {\n        buildLangChain: async (elements: any) => {\n            const reqOptions = _requestOptions('post');\n            const res = await fetch(`${config.apiUrl}/build-app`, {\n                ...reqOptions,\n                headers: {\n                    ...reqOptions.headers,\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(elements),\n            });\n            const json = await res.json();\n            return json;\n        },\n    }\n}\n\nexport default localDataContext;\n","import { IDataContext } from './types';\nimport LocalDataContext from './local-store-context';\n\nconst remoteDataContext: IDataContext = {\n    whoAmI: 'remote context',\n    store: LocalDataContext.store,\n    api: {\n        buildLangChain: async (elements: any) => '',\n    }\n}\n\nexport default remoteDataContext;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { eRunMode } from './types';\nimport DataContext from './context';\nimport LocalDataContext from './local-store-context';\nimport RemoteDataContext from './remote-store-context';\n\nimport config from './config';\nconst dataContext = config.runMode === eRunMode.Local \n    ? LocalDataContext\n    : RemoteDataContext;\n\nReactDOM.render(\n    (<DataContext.Provider value={dataContext}>\n        <App />\n    </DataContext.Provider>)\n    , document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}